var app=function(){"use strict";function t(){}const e=t=>t;function n(t){return t()}function r(){return Object.create(null)}function o(t){t.forEach(n)}function i(t){return"function"==typeof t}function s(t,e){return t!=t?e==e:t!==e||t&&"object"==typeof t||"function"==typeof t}function a(e,...n){if(null==e)return t;const r=e.subscribe(...n);return r.unsubscribe?()=>r.unsubscribe():r}function c(t){let e;return a(t,t=>e=t)(),e}function l(t,e,n){t.$$.on_destroy.push(a(e,n))}function u(t,e,n,r){if(t){const o=h(t,e,n,r);return t[0](o)}}function h(t,e,n,r){return t[1]&&r?function(t,e){for(const n in e)t[n]=e[n];return t}(n.ctx.slice(),t[1](r(e))):n.ctx}function p(t,e,n,r){if(t[2]&&r){const o=t[2](r(n));if(void 0===e.dirty)return o;if("object"==typeof o){const t=[],n=Math.max(e.dirty.length,o.length);for(let r=0;r<n;r+=1)t[r]=e.dirty[r]|o[r];return t}return e.dirty|o}return e.dirty}function f(t){return null==t?"":t}function d(t,e,n=e){return t.set(n),e}const m="undefined"!=typeof window;let g=m?()=>window.performance.now():()=>Date.now(),b=m?t=>requestAnimationFrame(t):t;const y=new Set;function v(t){y.forEach(e=>{e.c(t)||(y.delete(e),e.f())}),0!==y.size&&b(v)}function w(t){let e;return 0===y.size&&b(v),{promise:new Promise(n=>{y.add(e={c:t,f:n})}),abort(){y.delete(e)}}}function C(t,e){t.appendChild(e)}function A(t,e,n){t.insertBefore(e,n||null)}function k(t){t.parentNode.removeChild(t)}function $(t,e){for(let n=0;n<t.length;n+=1)t[n]&&t[n].d(e)}function x(t){return document.createElement(t)}function B(t){return document.createTextNode(t)}function E(){return B(" ")}function F(){return B("")}function K(t,e,n,r){return t.addEventListener(e,n,r),()=>t.removeEventListener(e,n,r)}function T(t){return function(e){return e.preventDefault(),t.call(this,e)}}function S(t,e,n){null==n?t.removeAttribute(e):t.getAttribute(e)!==n&&t.setAttribute(e,n)}function _(t,e){e=""+e,t.data!==e&&(t.data=e)}function R(t,e){(null!=e||t.value)&&(t.value=e)}function I(t,e,n,r){t.style.setProperty(e,n,r?"important":"")}function D(t,e,n){t.classList[n?"add":"remove"](e)}function N(t,e){const n=document.createEvent("CustomEvent");return n.initCustomEvent(t,!1,!1,e),n}const M=new Set;let O,P=0;function j(t,e,n,r,o,i,s,a=0){const c=16.666/r;let l="{\n";for(let t=0;t<=1;t+=c){const r=e+(n-e)*i(t);l+=100*t+`%{${s(r,1-r)}}\n`}const u=l+`100% {${s(n,1-n)}}\n}`,h=`__svelte_${function(t){let e=5381,n=t.length;for(;n--;)e=(e<<5)-e^t.charCodeAt(n);return e>>>0}(u)}_${a}`,p=t.ownerDocument;M.add(p);const f=p.__svelte_stylesheet||(p.__svelte_stylesheet=p.head.appendChild(x("style")).sheet),d=p.__svelte_rules||(p.__svelte_rules={});d[h]||(d[h]=!0,f.insertRule(`@keyframes ${h} ${u}`,f.cssRules.length));const m=t.style.animation||"";return t.style.animation=`${m?m+", ":""}${h} ${r}ms linear ${o}ms 1 both`,P+=1,h}function z(t,e){const n=(t.style.animation||"").split(", "),r=n.filter(e?t=>t.indexOf(e)<0:t=>-1===t.indexOf("__svelte")),o=n.length-r.length;o&&(t.style.animation=r.join(", "),P-=o,P||b(()=>{P||(M.forEach(t=>{const e=t.__svelte_stylesheet;let n=e.cssRules.length;for(;n--;)e.deleteRule(n);t.__svelte_rules={}}),M.clear())}))}function q(t){O=t}function L(){if(!O)throw new Error("Function called outside component initialization");return O}function U(){const t=L();return(e,n)=>{const r=t.$$.callbacks[e];if(r){const o=N(e,n);r.slice().forEach(e=>{e.call(t,o)})}}}const G=[],H=[],W=[],X=[],Y=Promise.resolve();let J=!1;function V(){J||(J=!0,Y.then(nt))}function Z(t){W.push(t)}function Q(t){X.push(t)}let tt=!1;const et=new Set;function nt(){if(!tt){tt=!0;do{for(let t=0;t<G.length;t+=1){const e=G[t];q(e),rt(e.$$)}for(G.length=0;H.length;)H.pop()();for(let t=0;t<W.length;t+=1){const e=W[t];et.has(e)||(et.add(e),e())}W.length=0}while(G.length);for(;X.length;)X.pop()();J=!1,tt=!1,et.clear()}}function rt(t){if(null!==t.fragment){t.update(),o(t.before_update);const e=t.dirty;t.dirty=[-1],t.fragment&&t.fragment.p(t.ctx,e),t.after_update.forEach(Z)}}let ot;function it(){return ot||(ot=Promise.resolve(),ot.then(()=>{ot=null})),ot}function st(t,e,n){t.dispatchEvent(N(`${e?"intro":"outro"}${n}`))}const at=new Set;let ct;function lt(){ct={r:0,c:[],p:ct}}function ut(){ct.r||o(ct.c),ct=ct.p}function ht(t,e){t&&t.i&&(at.delete(t),t.i(e))}function pt(t,e,n,r){if(t&&t.o){if(at.has(t))return;at.add(t),ct.c.push(()=>{at.delete(t),r&&(n&&t.d(1),r())}),t.o(e)}}const ft={duration:0};function dt(n,r,s,a){let c=r(n,s),l=a?0:1,u=null,h=null,p=null;function f(){p&&z(n,p)}function d(t,e){const n=t.b-l;return e*=Math.abs(n),{a:l,b:t.b,d:n,duration:e,start:t.start,end:t.start+e,group:t.group}}function m(r){const{delay:i=0,duration:s=300,easing:a=e,tick:m=t,css:b}=c||ft,y={start:g()+i,b:r};r||(y.group=ct,ct.r+=1),u?h=y:(b&&(f(),p=j(n,l,r,s,i,a,b)),r&&m(0,1),u=d(y,s),Z(()=>st(n,r,"start")),w(t=>{if(h&&t>h.start&&(u=d(h,s),h=null,st(n,u.b,"start"),b&&(f(),p=j(n,l,u.b,u.duration,0,a,c.css))),u)if(t>=u.end)m(l=u.b,1-l),st(n,u.b,"end"),h||(u.b?f():--u.group.r||o(u.group.c)),u=null;else if(t>=u.start){const e=t-u.start;l=u.a+u.d*a(e/u.duration),m(l,1-l)}return!(!u&&!h)}))}return{run(t){i(c)?it().then(()=>{c=c(),m(t)}):m(t)},end(){f(),u=h=null}}}function mt(t,e){t.d(1),e.delete(t.key)}function gt(t,e,n,r,o,i,s,a,c,l,u,h){let p=t.length,f=i.length,d=p;const m={};for(;d--;)m[t[d].key]=d;const g=[],b=new Map,y=new Map;for(d=f;d--;){const t=h(o,i,d),a=n(t);let c=s.get(a);c?r&&c.p(t,e):(c=l(a,t),c.c()),b.set(a,g[d]=c),a in m&&y.set(a,Math.abs(d-m[a]))}const v=new Set,w=new Set;function C(t){ht(t,1),t.m(a,u,s.has(t.key)),s.set(t.key,t),u=t.first,f--}for(;p&&f;){const e=g[f-1],n=t[p-1],r=e.key,o=n.key;e===n?(u=e.first,p--,f--):b.has(o)?!s.has(r)||v.has(r)?C(e):w.has(o)?p--:y.get(r)>y.get(o)?(w.add(r),C(e)):(v.add(o),p--):(c(n,s),p--)}for(;p--;){const e=t[p];b.has(e.key)||c(e,s)}for(;f;)C(g[f-1]);return g}function bt(t,e,n){const r=t.$$.props[e];void 0!==r&&(t.$$.bound[r]=n,n(t.$$.ctx[r]))}function yt(t){t&&t.c()}function vt(t,e,r){const{fragment:s,on_mount:a,on_destroy:c,after_update:l}=t.$$;s&&s.m(e,r),Z(()=>{const e=a.map(n).filter(i);c?c.push(...e):o(e),t.$$.on_mount=[]}),l.forEach(Z)}function wt(t,e){const n=t.$$;null!==n.fragment&&(o(n.on_destroy),n.fragment&&n.fragment.d(e),n.on_destroy=n.fragment=null,n.ctx=[])}function Ct(e,n,i,s,a,c,l=[-1]){const u=O;q(e);const h=n.props||{},p=e.$$={fragment:null,ctx:null,props:c,update:t,not_equal:a,bound:r(),on_mount:[],on_destroy:[],before_update:[],after_update:[],context:new Map(u?u.$$.context:[]),callbacks:r(),dirty:l};let f=!1;if(p.ctx=i?i(e,h,(t,n,...r)=>{const o=r.length?r[0]:n;return p.ctx&&a(p.ctx[t],p.ctx[t]=o)&&(p.bound[t]&&p.bound[t](o),f&&function(t,e){-1===t.$$.dirty[0]&&(G.push(t),V(),t.$$.dirty.fill(0)),t.$$.dirty[e/31|0]|=1<<e%31}(e,t)),n}):[],p.update(),f=!0,o(p.before_update),p.fragment=!!s&&s(p.ctx),n.target){if(n.hydrate){const t=function(t){return Array.from(t.childNodes)}(n.target);p.fragment&&p.fragment.l(t),t.forEach(k)}else p.fragment&&p.fragment.c();n.intro&&ht(e.$$.fragment),vt(e,n.target,n.anchor),nt()}q(u)}class At{$destroy(){wt(this,1),this.$destroy=t}$on(t,e){const n=this.$$.callbacks[t]||(this.$$.callbacks[t]=[]);return n.push(e),()=>{const t=n.indexOf(e);-1!==t&&n.splice(t,1)}}$set(){}}function kt(t){const e=t-1;return e*e*e+1}function $t(t,{delay:n=0,duration:r=400,easing:o=e}){const i=+getComputedStyle(t).opacity;return{delay:n,duration:r,easing:o,css:t=>"opacity: "+t*i}}function xt(t,{delay:e=0,duration:n=400,easing:r=kt,x:o=0,y:i=0,opacity:s=0}){const a=getComputedStyle(t),c=+a.opacity,l="none"===a.transform?"":a.transform,u=c*(1-s);return{delay:e,duration:n,easing:r,css:(t,e)=>`\n\t\t\ttransform: ${l} translate(${(1-t)*o}px, ${(1-t)*i}px);\n\t\t\topacity: ${c-u*e}`}}function Bt(t,{delay:e=0,duration:n=400,easing:r=kt}){const o=getComputedStyle(t),i=+o.opacity,s=parseFloat(o.height),a=parseFloat(o.paddingTop),c=parseFloat(o.paddingBottom),l=parseFloat(o.marginTop),u=parseFloat(o.marginBottom),h=parseFloat(o.borderTopWidth),p=parseFloat(o.borderBottomWidth);return{delay:e,duration:n,easing:r,css:t=>`overflow: hidden;opacity: ${Math.min(20*t,1)*i};height: ${t*s}px;padding-top: ${t*a}px;padding-bottom: ${t*c}px;margin-top: ${t*l}px;margin-bottom: ${t*u}px;border-top-width: ${t*h}px;border-bottom-width: ${t*p}px;`}}const Et=[];function Ft(e,n=t){let r;const o=[];function i(t){if(s(e,t)&&(e=t,r)){const t=!Et.length;for(let t=0;t<o.length;t+=1){const n=o[t];n[1](),Et.push(n,e)}if(t){for(let t=0;t<Et.length;t+=2)Et[t][0](Et[t+1]);Et.length=0}}}return{set:i,update:function(t){i(t(e))},subscribe:function(s,a=t){const c=[s,a];return o.push(c),1===o.length&&(r=n(i)||t),s(e),()=>{const t=o.indexOf(c);-1!==t&&o.splice(t,1),0===o.length&&(r(),r=null)}}}}const Kt="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_";function Tt(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}class St{constructor(t=0,e=!1){this.facing=t,this.locked=e}flip(){this.facing=(this.facing+1)%2}handleMarble(t){return 2*this.facing-1}get name(){return this.constructor.name}get requiresSlot(){return this.constructor.requiresSlot}get stopsMarble(){return this.constructor.stopsMarble}get flipsOnMarble(){return this.constructor.flipsOnMarble}get flipsNeighbors(){return this.constructor.flipsNeighbors}}Tt(St,"requiresSlot",!0);class _t extends St{constructor(t=0,e=!1){super(0,e)}flip(){}}class Rt extends St{}Tt(Rt,"name","ramp"),Tt(Rt,"code",[52,53]);class It extends St{}Tt(It,"name","bit"),Tt(It,"code",[54,55]),Tt(It,"flipsOnMarble",!0);class Dt extends St{}Tt(Dt,"name","gearbit"),Tt(Dt,"code",[56,57]),Tt(Dt,"flipsOnMarble",!0),Tt(Dt,"flipsNeighbors",!0);class Nt extends _t{handleMarble(t){return t}}Tt(Nt,"name","crossover"),Tt(Nt,"code",[58]);class Mt extends _t{}Tt(Mt,"name","interceptor"),Tt(Mt,"code",[59]),Tt(Mt,"stopsMarble",!0);class Ot extends St{handleMarble(t){return!1}}Tt(Ot,"requiresSlot",!1),Tt(Ot,"name","gear"),Tt(Ot,"code",[60,61]),Tt(Ot,"flipsNeighbors",!0);const Pt=[Rt,It,Nt,Mt,Dt,Ot],jt=Ft(Pt);jt.encode=function(){return c(this).filter(t=>void 0!==t.count&&t.count>=0&&t.count<=50).map(t=>Kt[t.code[0]]+Kt[t.count]).join("")},jt.decode=function(t){this.update(e=>(e.forEach(e=>{if(t){let n=t.indexOf(Kt[e.code[0]]);n>0&&n+1<t.length?e.count=Kt.indexOf(t[n+1]):e.count=1/0}else e.count=1/0}),e))};class zt extends Array{constructor(t){super(...t)}async startRun(t,e="left",n=(()=>{})){if(this.marble)return!1;let r;for(this.marble=t,this.position={x:"left"===e?3:7,y:-1},this.direction="left"===e?1:-1,await n(),this.position.y++,await n();this.marble&&this.tick();)if(11===this.position.y?r={marble:this.marble,side:this.direction>0?"right":"left"}:10===this.position.y&&5!=this.position.x?r={marble:this.marble,side:this.position.x>5?"right":"left"}:await n(),r)return this.marble=!1,r;return!1}tick(){if(this.marble){let t=!1,e=this[this.position.y][this.position.x];if(e){if(e.stopsMarble)return!1;t=e.handleMarble(this.direction),e.flipsOnMarble&&this.flip(this.position.x,this.position.y),t&&(this.position={x:this.position.x+t,y:this.position.y+1}),this.position.x<0&&this.position.x>this[0].length&&(t=!1)}if(!1===t)throw this.marble=!1,`Marble has escaped at ${this.position.x}, ${this.position.y}!`;return this.direction=t,!0}}at(t,e){return t>=0&&t<this[0].length&&e>=0&&e<this.length&&this[e][t]}isValid(t,e){return(0!==e||!(t<2||t>8||5===t))&&((1!==e||0!==t&&10!==t)&&(10!==e||5==t))}hasSlot(t,e){return Boolean((t+e)%2)}flipableNeighbors(t,e){let n=this.at(t,e),r=new Set;if(n&&(r.add(n),n.flipsNeighbors)){const n=(t,e)=>{let o=[[1,0],[-1,0],[0,1],[0,-1]].map(n=>[n[0]+t,n[1]+e]).filter(t=>{let e=this.at(...t);return e&&e.flipsNeighbors&&!r.has(e)});o.forEach(t=>r.add(this.at(...t))),o.forEach(t=>n(...t))};n(t,e)}return r}flip(t,e){this.flipableNeighbors(t,e).forEach(t=>t.flip())}encode(){let t="";return this.forEach(e=>{for(let n=0;n<e.length;n++)if(e[n])t+=Kt[e[n].constructor.code[e[n].facing]],e[n].locked&&(t+=Kt[62]);else{let r=e.slice(n+1),o=r.findIndex(t=>t);o<0&&(o=r.length),t+=Kt[o],n+=o}}),t}static create(t=null){let e=[...Array(11)];if(t){if(!/^[a-zA-Z0-9-_]*$/.test(t))throw"Code is not base64 url encoded!";if(t.length<11)throw"Code is too short!";{let n=0,r=!1;62==Kt.indexOf(t[0])&&(r=!0,n=1),e=e.map(()=>{let e=[];for(;e.length<11&&n<t.length;){let o=Kt.indexOf(t[n]);if(o<11)e.push(...Array(o+1));else{let i=Pt.find(t=>t.code.includes(o));if(!i)throw"Invalid code! "+o+" @ position "+n;{let s=n+1<t.length&&t[n+1]===Kt[62];e.push(new i(i.code.indexOf(o),r||s)),s&&n++}}n++}return e})}}else e=e.map(()=>Array(11));return new zt(e)}}const qt=Ft(zt.create());qt.encode=function(){return c(this).encode()},qt.decode=function(t){try{this.set(zt.create(t))}catch(t){console.log(t),console.log("Initializing empty board"),this.set(zt.create())}};const Lt=Ft(!1),Ut=Ft(!1),Gt=Ft(!1),Ht=Ft(window.location.pathname.endsWith("room/")||window.location.pathname.endsWith("about/")?"../":"./");function Wt(t,e,n){const r=t.slice();return r[4]=e[n],r[6]=n,r}function Xt(e){let n,r,o;return{c(){n=x("img"),n.src!==(r=e[3]+"images/marble"+e[4].color+".svg")&&S(n,"src",r),S(n,"alt",o=e[4].color+" marble"),S(n,"class","svelte-926an8")},m(t,e){A(t,n,e)},p(t,e){9&e&&n.src!==(r=t[3]+"images/marble"+t[4].color+".svg")&&S(n,"src",r),1&e&&o!==(o=t[4].color+" marble")&&S(n,"alt",o)},i:t,o:t,d(t){t&&k(n)}}}function Yt(n){let r,o,s,a;return{c(){r=x("img"),r.src!==(o=n[3]+"images/marble"+n[4].color+".svg")&&S(r,"src",o),S(r,"alt",s=n[4].color+" marble"),S(r,"class","svelte-926an8")},m(t,e){A(t,r,e)},p(t,e){9&e&&r.src!==(o=t[3]+"images/marble"+t[4].color+".svg")&&S(r,"src",o),1&e&&s!==(s=t[4].color+" marble")&&S(r,"alt",s)},i(n){a||Z(()=>{a=function(n,r,o){let s,a,c=r(n,o),l=!1,u=0;function h(){s&&z(n,s)}function p(){const{delay:r=0,duration:o=300,easing:i=e,tick:p=t,css:f}=c||ft;f&&(s=j(n,0,1,o,r,i,f,u++)),p(0,1);const d=g()+r,m=d+o;a&&a.abort(),l=!0,Z(()=>st(n,!0,"start")),a=w(t=>{if(l){if(t>=m)return p(1,0),st(n,!0,"end"),h(),l=!1;if(t>=d){const e=i((t-d)/o);p(e,1-e)}}return l})}let f=!1;return{start(){f||(z(n),i(c)?(c=c(),it().then(p)):p())},invalidate(){f=!1},end(){l&&(h(),l=!1)}}}(r,xt,{x:-200,duration:600}),a.start()})},o:t,d(t){t&&k(r)}}}function Jt(e,n){let r,o;function i(t,e){return t[2]?Yt:Xt}let s=i(n),a=s(n);return{key:e,first:null,c(){r=F(),a.c(),o=F(),this.first=r},m(t,e){A(t,r,e),a.m(t,e),A(t,o,e)},p(t,e){s===(s=i(t))&&a?a.p(t,e):(a.d(1),a=s(t),a&&(a.c(),ht(a,1),a.m(o.parentNode,o)))},i(t){ht(a)},o:t,d(t){t&&k(r),a.d(t),t&&k(o)}}}function Vt(e){let n,r=[],o=new Map,i=e[0];const s=t=>t[6];for(let t=0;t<i.length;t+=1){let n=Wt(e,i,t),a=s(n);o.set(a,r[t]=Jt(a,n))}return{c(){n=x("div");for(let t=0;t<r.length;t+=1)r[t].c();S(n,"id","marble-tray"),S(n,"class","svelte-926an8"),D(n,"right","right"===e[1])},m(t,e){A(t,n,e);for(let t=0;t<r.length;t+=1)r[t].m(n,null)},p(t,[e]){if(13&e){const i=t[0];r=gt(r,e,s,1,t,i,o,n,mt,Jt,null,Wt)}2&e&&D(n,"right","right"===t[1])},i(t){for(let t=0;t<i.length;t+=1)ht(r[t])},o:t,d(t){t&&k(n);for(let t=0;t<r.length;t+=1)r[t].d()}}}function Zt(t,e,n){let r;l(t,Ht,t=>n(3,r=t));let{marbles:o=[]}=e,{direction:i="left"}=e,{result:s=!1}=e;return t.$set=t=>{"marbles"in t&&n(0,o=t.marbles),"direction"in t&&n(1,i=t.direction),"result"in t&&n(2,s=t.result)},[o,i,s,r]}Ht.update=function(){this.set(window.location.pathname.endsWith("room/")||window.location.pathname.endsWith("room")||window.location.pathname.endsWith("about/")||window.location.pathname.endsWith("about")||window.location.pathname.endsWith("about/index.html")?"../":"./")};class Qt extends At{constructor(t){super(),Ct(this,t,Zt,Vt,s,{marbles:0,direction:1,result:2})}}function te(t){let e,n,r,i,s,a,c,l,f,d,m,g;const b=t[5].default,y=u(b,t,t[4],null);return{c(){e=x("div"),n=x("div"),r=x("header"),i=x("h2"),s=B(t[1]),a=E(),c=x("button"),c.textContent="X",l=E(),y&&y.c(),S(i,"class","svelte-1sswz57"),S(c,"class","close-modal svelte-1sswz57"),S(r,"class","svelte-1sswz57"),S(n,"class","modal svelte-1sswz57"),S(e,"class","cover svelte-1sswz57"),D(e,"fading",!t[0])},m(u,h,p){var f;A(u,e,h),C(e,n),C(n,r),C(r,i),C(i,s),C(r,a),C(r,c),C(n,l),y&&y.m(n,null),m=!0,p&&o(g),g=[K(c,"click",t[2]),K(e,"click",(f=T(t[2]),function(t){t.target===this&&f.call(this,t)}))]},p(t,n){(!m||2&n)&&_(s,t[1]),y&&y.p&&16&n&&y.p(h(b,t,t[4],null),p(b,t[4],n,null)),1&n&&D(e,"fading",!t[0])},i(t){m||(ht(y,t),Z(()=>{f||(f=dt(n,xt,{y:-300,duration:600},!0)),f.run(1)}),Z(()=>{d||(d=dt(e,$t,{},!0)),d.run(1)}),m=!0)},o(t){pt(y,t),f||(f=dt(n,xt,{y:-300,duration:600},!1)),f.run(0),d||(d=dt(e,$t,{},!1)),d.run(0),m=!1},d(t){t&&k(e),y&&y.d(t),t&&f&&f.end(),t&&d&&d.end(),o(g)}}}function ee(t){let e,n,r=t[0]&&te(t);return{c(){r&&r.c(),e=F()},m(t,o){r&&r.m(t,o),A(t,e,o),n=!0},p(t,[n]){t[0]?r?(r.p(t,n),ht(r,1)):(r=te(t),r.c(),ht(r,1),r.m(e.parentNode,e)):r&&(lt(),pt(r,1,1,()=>{r=null}),ut())},i(t){n||(ht(r),n=!0)},o(t){pt(r),n=!1},d(t){r&&r.d(t),t&&k(e)}}}function ne(t,e,n){let{visible:r=!1}=e,{title:o="Modal"}=e;const i=U();let{$$slots:s={},$$scope:a}=e;return t.$set=t=>{"visible"in t&&n(0,r=t.visible),"title"in t&&n(1,o=t.title),"$$scope"in t&&n(4,a=t.$$scope)},[r,o,function(){n(0,r=!1),i("close")},i,a,s]}class re extends At{constructor(t){super(),Ct(this,t,ne,ee,s,{visible:0,title:1})}}function oe(e){let n,r,o;return{c(){n=x("div"),r=x("button"),r.innerHTML='<span class="svelte-1t7zbiz">∞</span>',S(r,"class","infinity svelte-1t7zbiz"),S(n,"class","infinity-button")},m(t,i,s){A(t,n,i),C(n,r),s&&o(),o=K(r,"click",e[17])},p:t,d(t){t&&k(n),o()}}}function ie(t){let e,n,r,i,s,a,c,l,f,d,m,g,b,y,v,w,$;const B=t[14].default,F=u(B,t,t[19],null);let _=t[1]&&oe(t);return{c(){e=x("div"),n=x("div"),F&&F.c(),r=E(),i=x("div"),s=x("div"),a=x("button"),a.textContent="-",c=x("form"),l=x("input"),f=x("button"),f.textContent="+",d=E(),_&&_.c(),m=E(),g=x("div"),b=x("button"),b.textContent="OK",y=E(),v=x("button"),v.textContent="Cancel",S(a,"class","decrease svelte-1t7zbiz"),S(l,"maxlength","2"),S(l,"type","text"),S(l,"class","svelte-1t7zbiz"),D(l,"infinity","∞"===t[3]),S(c,"class","svelte-1t7zbiz"),S(f,"class","increase svelte-1t7zbiz"),S(s,"class","number-input svelte-1t7zbiz"),S(e,"class","container svelte-1t7zbiz"),S(g,"class","confirm svelte-1t7zbiz")},m(u,h,p){A(u,e,h),C(e,n),F&&F.m(n,null),C(e,r),C(e,i),C(i,s),C(s,a),C(s,c),C(c,l),R(l,t[3]),t[16](l),C(s,f),C(i,d),_&&_.m(i,null),A(u,m,h),A(u,g,h),C(g,b),C(g,y),C(g,v),w=!0,p&&o($),$=[K(a,"click",t[6]),K(l,"input",t[15]),K(l,"input",t[8]),K(l,"beforeinput",t[7]),K(c,"submit",T(t[10])),K(f,"click",T(t[5])),K(b,"click",t[10]),K(v,"click",t[9])]},p(t,e){F&&F.p&&524288&e&&F.p(h(B,t,t[19],null),p(B,t[19],e,null)),8&e&&l.value!==t[3]&&R(l,t[3]),8&e&&D(l,"infinity","∞"===t[3]),t[1]?_?_.p(t,e):(_=oe(t),_.c(),_.m(i,null)):_&&(_.d(1),_=null)},i(t){w||(ht(F,t),w=!0)},o(t){pt(F,t),w=!1},d(n){n&&k(e),F&&F.d(n),t[16](null),_&&_.d(),n&&k(m),n&&k(g),o($)}}}function se(t){let e,n;function r(e){t[18].call(null,e)}let o={title:t[2],$$slots:{default:[ie]},$$scope:{ctx:t}};void 0!==t[0]&&(o.visible=t[0]);const i=new re({props:o});return H.push(()=>bt(i,"visible",r)),{c(){yt(i.$$.fragment)},m(t,e){vt(i,t,e),n=!0},p(t,[n]){const r={};4&n&&(r.title=t[2]),524314&n&&(r.$$scope={dirty:n,ctx:t}),!e&&1&n&&(e=!0,r.visible=t[0],Q(()=>e=!1)),i.$set(r)},i(t){n||(ht(i.$$.fragment,t),n=!0)},o(t){pt(i.$$.fragment,t),n=!1},d(t){wt(i,t)}}}function ae(t,e,n){let r,o,{number:i=0}=e,{max:s=50}=e,{infinity:a=!0}=e,{title:c}=e,{visible:l=!1}=e;const u=U();let{$$slots:h={},$$scope:p}=e;return t.$set=t=>{"number"in t&&n(11,i=t.number),"max"in t&&n(12,s=t.max),"infinity"in t&&n(1,a=t.infinity),"title"in t&&n(2,c=t.title),"visible"in t&&n(0,l=t.visible),"$$scope"in t&&n(19,p=t.$$scope)},t.$$.update=()=>{2048&t.$$.dirty&&n(3,r=i===1/0?"∞":i)},[l,a,c,r,o,function(){"∞"!==r&&parseInt(r)<s?n(3,r=parseInt(r)+1):n(3,r=a?"∞":s)},function(){n(3,r="∞"!==r?Math.max(0,parseInt(r)-1):s)},function(t){if(null!==t.data){""===t.data.replace(/[^0-9]/,"")&&t.preventDefault(),"∞"===r&&n(3,r="")}},function(t){""===r&&n(3,r="0"),n(3,r=Math.max(0,parseInt(r))),r>s&&n(3,r=a?"∞":s)},function(){n(0,l=!1),n(3,r=i)},function(){u("update","∞"===r?1/0:parseInt(r)),n(0,l=!1)},i,s,u,h,function(){r=this.value,n(3,r),n(11,i)},function(t){H[t?"unshift":"push"](()=>{n(4,o=t)})},()=>n(3,r="∞"),function(t){l=t,n(0,l)},p]}class ce extends At{constructor(t){super(),Ct(this,t,ae,se,s,{number:11,max:12,infinity:1,title:2,visible:0})}}class le{constructor(){}get color(){return this.constructor.color}}class ue extends le{}Tt(ue,"color","blue");class he extends le{}Tt(he,"color","red");const pe=Ft({numbers:{left:8,right:8},edit:{}});function fe(t,e){return t(e={exports:{}},e.exports),e.exports}pe.reset=function(t,e){qt.update(t=>(t.marble&&(t.marble=!1,t.position=!1),t)),this.update(n=>(void 0!==t&&void 0!==e&&(n.numbers={left:t,right:e}),n.results=[],n.left=[...Array(n.numbers.left)].map(t=>new ue),n.right=[...Array(n.numbers.right)].map(t=>new he),n))},pe.encode=function(){let t=c(this);return Kt[t.numbers.left]+Kt[t.numbers.right]},pe.decode=function(t){if(t){let e=Kt.indexOf(t[0]),n=Kt.indexOf(t[1]);e<=20&&n<=20&&this.reset(e,n)}else this.reset(8,8)},pe.reset();var de=/^(?:(?![^:@]+:[^:@\/]*@)(http|https|ws|wss):\/\/)?((?:(([^:@]*)(?::([^:@]*))?)?@)?((?:[a-f0-9]{0,4}:){2,7}[a-f0-9]{0,4}|[^:\/?#]*)(?::(\d*))?)(((\/(?:[^?#](?![^?#\/]*\.[^?#\/.]+(?:[?#]|$)))*\/?)?([^?#\/]*))(?:\?([^#]*))?(?:#(.*))?)/,me=["source","protocol","authority","userInfo","user","password","host","port","relative","path","directory","file","query","anchor"],ge=function(t){var e=t,n=t.indexOf("["),r=t.indexOf("]");-1!=n&&-1!=r&&(t=t.substring(0,n)+t.substring(n,r).replace(/:/g,";")+t.substring(r,t.length));for(var o=de.exec(t||""),i={},s=14;s--;)i[me[s]]=o[s]||"";return-1!=n&&-1!=r&&(i.source=e,i.host=i.host.substring(1,i.host.length-1).replace(/;/g,":"),i.authority=i.authority.replace("[","").replace("]","").replace(/;/g,":"),i.ipv6uri=!0),i},be=1e3,ye=6e4,ve=60*ye,we=24*ve,Ce=function(t,e){e=e||{};var n=typeof t;if("string"===n&&t.length>0)return function(t){if((t=String(t)).length>100)return;var e=/^(-?(?:\d+)?\.?\d+) *(milliseconds?|msecs?|ms|seconds?|secs?|s|minutes?|mins?|m|hours?|hrs?|h|days?|d|weeks?|w|years?|yrs?|y)?$/i.exec(t);if(!e)return;var n=parseFloat(e[1]);switch((e[2]||"ms").toLowerCase()){case"years":case"year":case"yrs":case"yr":case"y":return 315576e5*n;case"weeks":case"week":case"w":return 6048e5*n;case"days":case"day":case"d":return n*we;case"hours":case"hour":case"hrs":case"hr":case"h":return n*ve;case"minutes":case"minute":case"mins":case"min":case"m":return n*ye;case"seconds":case"second":case"secs":case"sec":case"s":return n*be;case"milliseconds":case"millisecond":case"msecs":case"msec":case"ms":return n;default:return}}(t);if("number"===n&&isFinite(t))return e.long?function(t){var e=Math.abs(t);if(e>=we)return Ae(t,e,we,"day");if(e>=ve)return Ae(t,e,ve,"hour");if(e>=ye)return Ae(t,e,ye,"minute");if(e>=be)return Ae(t,e,be,"second");return t+" ms"}(t):function(t){var e=Math.abs(t);if(e>=we)return Math.round(t/we)+"d";if(e>=ve)return Math.round(t/ve)+"h";if(e>=ye)return Math.round(t/ye)+"m";if(e>=be)return Math.round(t/be)+"s";return t+"ms"}(t);throw new Error("val is not a non-empty string or a valid number. val="+JSON.stringify(t))};function Ae(t,e,n,r){var o=e>=1.5*n;return Math.round(t/n)+" "+r+(o?"s":"")}var ke=function(t){function e(t){let e=0;for(let n=0;n<t.length;n++)e=(e<<5)-e+t.charCodeAt(n),e|=0;return n.colors[Math.abs(e)%n.colors.length]}function n(t){let i;function s(...t){if(!s.enabled)return;const e=s,r=Number(new Date),o=r-(i||r);e.diff=o,e.prev=i,e.curr=r,i=r,t[0]=n.coerce(t[0]),"string"!=typeof t[0]&&t.unshift("%O");let a=0;t[0]=t[0].replace(/%([a-zA-Z%])/g,(r,o)=>{if("%%"===r)return r;a++;const i=n.formatters[o];if("function"==typeof i){const n=t[a];r=i.call(e,n),t.splice(a,1),a--}return r}),n.formatArgs.call(e,t),(e.log||n.log).apply(e,t)}return s.namespace=t,s.enabled=n.enabled(t),s.useColors=n.useColors(),s.color=e(t),s.destroy=r,s.extend=o,"function"==typeof n.init&&n.init(s),n.instances.push(s),s}function r(){const t=n.instances.indexOf(this);return-1!==t&&(n.instances.splice(t,1),!0)}function o(t,e){const r=n(this.namespace+(void 0===e?":":e)+t);return r.log=this.log,r}function i(t){return t.toString().substring(2,t.toString().length-2).replace(/\.\*\?$/,"*")}return n.debug=n,n.default=n,n.coerce=function(t){if(t instanceof Error)return t.stack||t.message;return t},n.disable=function(){const t=[...n.names.map(i),...n.skips.map(i).map(t=>"-"+t)].join(",");return n.enable(""),t},n.enable=function(t){let e;n.save(t),n.names=[],n.skips=[];const r=("string"==typeof t?t:"").split(/[\s,]+/),o=r.length;for(e=0;e<o;e++)r[e]&&("-"===(t=r[e].replace(/\*/g,".*?"))[0]?n.skips.push(new RegExp("^"+t.substr(1)+"$")):n.names.push(new RegExp("^"+t+"$")));for(e=0;e<n.instances.length;e++){const t=n.instances[e];t.enabled=n.enabled(t.namespace)}},n.enabled=function(t){if("*"===t[t.length-1])return!0;let e,r;for(e=0,r=n.skips.length;e<r;e++)if(n.skips[e].test(t))return!1;for(e=0,r=n.names.length;e<r;e++)if(n.names[e].test(t))return!0;return!1},n.humanize=Ce,Object.keys(t).forEach(e=>{n[e]=t[e]}),n.instances=[],n.names=[],n.skips=[],n.formatters={},n.selectColor=e,n.enable(n.load()),n},$e=fe((function(t,e){e.log=function(...t){return"object"==typeof console&&console.log&&console.log(...t)},e.formatArgs=function(e){if(e[0]=(this.useColors?"%c":"")+this.namespace+(this.useColors?" %c":" ")+e[0]+(this.useColors?"%c ":" ")+"+"+t.exports.humanize(this.diff),!this.useColors)return;const n="color: "+this.color;e.splice(1,0,n,"color: inherit");let r=0,o=0;e[0].replace(/%[a-zA-Z%]/g,t=>{"%%"!==t&&(r++,"%c"===t&&(o=r))}),e.splice(o,0,n)},e.save=function(t){try{t?e.storage.setItem("debug",t):e.storage.removeItem("debug")}catch(t){}},e.load=function(){let t;try{t=e.storage.getItem("debug")}catch(t){}!t&&"undefined"!=typeof process&&"env"in process&&(t=process.env.DEBUG);return t},e.useColors=function(){if("undefined"!=typeof window&&window.process&&("renderer"===window.process.type||window.process.__nwjs))return!0;if("undefined"!=typeof navigator&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/(edge|trident)\/(\d+)/))return!1;return"undefined"!=typeof document&&document.documentElement&&document.documentElement.style&&document.documentElement.style.WebkitAppearance||"undefined"!=typeof window&&window.console&&(window.console.firebug||window.console.exception&&window.console.table)||"undefined"!=typeof navigator&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/firefox\/(\d+)/)&&parseInt(RegExp.$1,10)>=31||"undefined"!=typeof navigator&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/applewebkit\/(\d+)/)},e.storage=function(){try{return localStorage}catch(t){}}(),e.colors=["#0000CC","#0000FF","#0033CC","#0033FF","#0066CC","#0066FF","#0099CC","#0099FF","#00CC00","#00CC33","#00CC66","#00CC99","#00CCCC","#00CCFF","#3300CC","#3300FF","#3333CC","#3333FF","#3366CC","#3366FF","#3399CC","#3399FF","#33CC00","#33CC33","#33CC66","#33CC99","#33CCCC","#33CCFF","#6600CC","#6600FF","#6633CC","#6633FF","#66CC00","#66CC33","#9900CC","#9900FF","#9933CC","#9933FF","#99CC00","#99CC33","#CC0000","#CC0033","#CC0066","#CC0099","#CC00CC","#CC00FF","#CC3300","#CC3333","#CC3366","#CC3399","#CC33CC","#CC33FF","#CC6600","#CC6633","#CC9900","#CC9933","#CCCC00","#CCCC33","#FF0000","#FF0033","#FF0066","#FF0099","#FF00CC","#FF00FF","#FF3300","#FF3333","#FF3366","#FF3399","#FF33CC","#FF33FF","#FF6600","#FF6633","#FF9900","#FF9933","#FFCC00","#FFCC33"],t.exports=ke(e);const{formatters:n}=t.exports;n.j=function(t){try{return JSON.stringify(t)}catch(t){return"[UnexpectedJSONParseError]: "+t.message}}})),xe=($e.log,$e.formatArgs,$e.save,$e.load,$e.useColors,$e.storage,$e.colors,$e("socket.io-client:url")),Be=function(t,e){var n=t;e=e||"undefined"!=typeof location&&location,null==t&&(t=e.protocol+"//"+e.host);"string"==typeof t&&("/"===t.charAt(0)&&(t="/"===t.charAt(1)?e.protocol+t:e.host+t),/^(https?|wss?):\/\//.test(t)||(xe("protocol-less url %s",t),t=void 0!==e?e.protocol+"//"+t:"https://"+t),xe("parse %s",t),n=ge(t));n.port||(/^(http|ws)$/.test(n.protocol)?n.port="80":/^(http|ws)s$/.test(n.protocol)&&(n.port="443"));n.path=n.path||"/";var r=-1!==n.host.indexOf(":")?"["+n.host+"]":n.host;return n.id=n.protocol+"://"+r+":"+n.port,n.href=n.protocol+"://"+r+(e&&e.port===n.port?"":":"+n.port),n};var Ee=36e5,Fe=24*Ee,Ke=function(t,e){e=e||{};var n=typeof t;if("string"===n&&t.length>0)return function(t){if((t=String(t)).length>100)return;var e=/^((?:\d+)?\.?\d+) *(milliseconds?|msecs?|ms|seconds?|secs?|s|minutes?|mins?|m|hours?|hrs?|h|days?|d|years?|yrs?|y)?$/i.exec(t);if(!e)return;var n=parseFloat(e[1]);switch((e[2]||"ms").toLowerCase()){case"years":case"year":case"yrs":case"yr":case"y":return 315576e5*n;case"days":case"day":case"d":return n*Fe;case"hours":case"hour":case"hrs":case"hr":case"h":return n*Ee;case"minutes":case"minute":case"mins":case"min":case"m":return 6e4*n;case"seconds":case"second":case"secs":case"sec":case"s":return 1e3*n;case"milliseconds":case"millisecond":case"msecs":case"msec":case"ms":return n;default:return}}(t);if("number"===n&&!1===isNaN(t))return e.long?function(t){return Te(t,Fe,"day")||Te(t,Ee,"hour")||Te(t,6e4,"minute")||Te(t,1e3,"second")||t+" ms"}(t):function(t){if(t>=Fe)return Math.round(t/Fe)+"d";if(t>=Ee)return Math.round(t/Ee)+"h";if(t>=6e4)return Math.round(t/6e4)+"m";if(t>=1e3)return Math.round(t/1e3)+"s";return t+"ms"}(t);throw new Error("val is not a non-empty string or a valid number. val="+JSON.stringify(t))};function Te(t,e,n){if(!(t<e))return t<1.5*e?Math.floor(t/e)+" "+n:Math.ceil(t/e)+" "+n+"s"}var Se=fe((function(t,e){function n(t){var n;function o(){if(o.enabled){var t=o,r=+new Date,i=r-(n||r);t.diff=i,t.prev=n,t.curr=r,n=r;for(var s=new Array(arguments.length),a=0;a<s.length;a++)s[a]=arguments[a];s[0]=e.coerce(s[0]),"string"!=typeof s[0]&&s.unshift("%O");var c=0;s[0]=s[0].replace(/%([a-zA-Z%])/g,(function(n,r){if("%%"===n)return n;c++;var o=e.formatters[r];if("function"==typeof o){var i=s[c];n=o.call(t,i),s.splice(c,1),c--}return n})),e.formatArgs.call(t,s);var l=o.log||e.log||console.log.bind(console);l.apply(t,s)}}return o.namespace=t,o.enabled=e.enabled(t),o.useColors=e.useColors(),o.color=function(t){var n,r=0;for(n in t)r=(r<<5)-r+t.charCodeAt(n),r|=0;return e.colors[Math.abs(r)%e.colors.length]}(t),o.destroy=r,"function"==typeof e.init&&e.init(o),e.instances.push(o),o}function r(){var t=e.instances.indexOf(this);return-1!==t&&(e.instances.splice(t,1),!0)}(e=t.exports=n.debug=n.default=n).coerce=function(t){return t instanceof Error?t.stack||t.message:t},e.disable=function(){e.enable("")},e.enable=function(t){var n;e.save(t),e.names=[],e.skips=[];var r=("string"==typeof t?t:"").split(/[\s,]+/),o=r.length;for(n=0;n<o;n++)r[n]&&("-"===(t=r[n].replace(/\*/g,".*?"))[0]?e.skips.push(new RegExp("^"+t.substr(1)+"$")):e.names.push(new RegExp("^"+t+"$")));for(n=0;n<e.instances.length;n++){var i=e.instances[n];i.enabled=e.enabled(i.namespace)}},e.enabled=function(t){if("*"===t[t.length-1])return!0;var n,r;for(n=0,r=e.skips.length;n<r;n++)if(e.skips[n].test(t))return!1;for(n=0,r=e.names.length;n<r;n++)if(e.names[n].test(t))return!0;return!1},e.humanize=Ke,e.instances=[],e.names=[],e.skips=[],e.formatters={}})),_e=(Se.coerce,Se.disable,Se.enable,Se.enabled,Se.humanize,Se.instances,Se.names,Se.skips,Se.formatters,fe((function(t,e){function n(){var t;try{t=e.storage.debug}catch(t){}return!t&&"undefined"!=typeof process&&"env"in process&&(t=process.env.DEBUG),t}(e=t.exports=Se).log=function(){return"object"==typeof console&&console.log&&Function.prototype.apply.call(console.log,console,arguments)},e.formatArgs=function(t){var n=this.useColors;if(t[0]=(n?"%c":"")+this.namespace+(n?" %c":" ")+t[0]+(n?"%c ":" ")+"+"+e.humanize(this.diff),!n)return;var r="color: "+this.color;t.splice(1,0,r,"color: inherit");var o=0,i=0;t[0].replace(/%[a-zA-Z%]/g,(function(t){"%%"!==t&&(o++,"%c"===t&&(i=o))})),t.splice(i,0,r)},e.save=function(t){try{null==t?e.storage.removeItem("debug"):e.storage.debug=t}catch(t){}},e.load=n,e.useColors=function(){if("undefined"!=typeof window&&window.process&&"renderer"===window.process.type)return!0;if("undefined"!=typeof navigator&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/(edge|trident)\/(\d+)/))return!1;return"undefined"!=typeof document&&document.documentElement&&document.documentElement.style&&document.documentElement.style.WebkitAppearance||"undefined"!=typeof window&&window.console&&(window.console.firebug||window.console.exception&&window.console.table)||"undefined"!=typeof navigator&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/firefox\/(\d+)/)&&parseInt(RegExp.$1,10)>=31||"undefined"!=typeof navigator&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/applewebkit\/(\d+)/)},e.storage="undefined"!=typeof chrome&&void 0!==chrome.storage?chrome.storage.local:function(){try{return window.localStorage}catch(t){}}(),e.colors=["#0000CC","#0000FF","#0033CC","#0033FF","#0066CC","#0066FF","#0099CC","#0099FF","#00CC00","#00CC33","#00CC66","#00CC99","#00CCCC","#00CCFF","#3300CC","#3300FF","#3333CC","#3333FF","#3366CC","#3366FF","#3399CC","#3399FF","#33CC00","#33CC33","#33CC66","#33CC99","#33CCCC","#33CCFF","#6600CC","#6600FF","#6633CC","#6633FF","#66CC00","#66CC33","#9900CC","#9900FF","#9933CC","#9933FF","#99CC00","#99CC33","#CC0000","#CC0033","#CC0066","#CC0099","#CC00CC","#CC00FF","#CC3300","#CC3333","#CC3366","#CC3399","#CC33CC","#CC33FF","#CC6600","#CC6633","#CC9900","#CC9933","#CCCC00","#CCCC33","#FF0000","#FF0033","#FF0066","#FF0099","#FF00CC","#FF00FF","#FF3300","#FF3333","#FF3366","#FF3399","#FF33CC","#FF33FF","#FF6600","#FF6633","#FF9900","#FF9933","#FFCC00","#FFCC33"],e.formatters.j=function(t){try{return JSON.stringify(t)}catch(t){return"[UnexpectedJSONParseError]: "+t.message}},e.enable(n())}))),Re=(_e.log,_e.formatArgs,_e.save,_e.load,_e.useColors,_e.storage,_e.colors,fe((function(t){function e(t){if(t)return function(t){for(var n in e.prototype)t[n]=e.prototype[n];return t}(t)}t.exports=e,e.prototype.on=e.prototype.addEventListener=function(t,e){return this._callbacks=this._callbacks||{},(this._callbacks["$"+t]=this._callbacks["$"+t]||[]).push(e),this},e.prototype.once=function(t,e){function n(){this.off(t,n),e.apply(this,arguments)}return n.fn=e,this.on(t,n),this},e.prototype.off=e.prototype.removeListener=e.prototype.removeAllListeners=e.prototype.removeEventListener=function(t,e){if(this._callbacks=this._callbacks||{},0==arguments.length)return this._callbacks={},this;var n,r=this._callbacks["$"+t];if(!r)return this;if(1==arguments.length)return delete this._callbacks["$"+t],this;for(var o=0;o<r.length;o++)if((n=r[o])===e||n.fn===e){r.splice(o,1);break}return this},e.prototype.emit=function(t){this._callbacks=this._callbacks||{};var e=[].slice.call(arguments,1),n=this._callbacks["$"+t];if(n)for(var r=0,o=(n=n.slice(0)).length;r<o;++r)n[r].apply(this,e);return this},e.prototype.listeners=function(t){return this._callbacks=this._callbacks||{},this._callbacks["$"+t]||[]},e.prototype.hasListeners=function(t){return!!this.listeners(t).length}}))),Ie={}.toString,De=Array.isArray||function(t){return"[object Array]"==Ie.call(t)},Ne=function(t){return Me&&Buffer.isBuffer(t)||Oe&&(t instanceof ArrayBuffer||function(t){return"function"==typeof ArrayBuffer.isView?ArrayBuffer.isView(t):t.buffer instanceof ArrayBuffer}(t))},Me="function"==typeof Buffer&&"function"==typeof Buffer.isBuffer,Oe="function"==typeof ArrayBuffer;var Pe=Object.prototype.toString,je="function"==typeof Blob||"undefined"!=typeof Blob&&"[object BlobConstructor]"===Pe.call(Blob),ze="function"==typeof File||"undefined"!=typeof File&&"[object FileConstructor]"===Pe.call(File);var qe=function(t){var e=[],n=t.data,r=t;return r.data=function t(e,n){if(!e)return e;if(Ne(e)){var r={_placeholder:!0,num:n.length};return n.push(e),r}if(De(e)){for(var o=new Array(e.length),i=0;i<e.length;i++)o[i]=t(e[i],n);return o}if("object"==typeof e&&!(e instanceof Date)){o={};for(var s in e)o[s]=t(e[s],n);return o}return e}(n,e),r.attachments=e.length,{packet:r,buffers:e}},Le=function(t,e){return t.data=function t(e,n){if(!e)return e;if(e&&e._placeholder)return n[e.num];if(De(e))for(var r=0;r<e.length;r++)e[r]=t(e[r],n);else if("object"==typeof e)for(var o in e)e[o]=t(e[o],n);return e}(t.data,e),t.attachments=void 0,t},Ue=function(t,e){var n=0,r=t;!function t(o,i,s){if(!o)return o;if(je&&o instanceof Blob||ze&&o instanceof File){n++;var a=new FileReader;a.onload=function(){s?s[i]=this.result:r=this.result,--n||e(r)},a.readAsArrayBuffer(o)}else if(De(o))for(var c=0;c<o.length;c++)t(o[c],c,o);else if("object"==typeof o&&!Ne(o))for(var l in o)t(o[l],l,o)}(r),n||e(r)},Ge=fe((function(t,e){var n=_e("socket.io-parser");function r(){}e.protocol=4,e.types=["CONNECT","DISCONNECT","EVENT","ACK","ERROR","BINARY_EVENT","BINARY_ACK"],e.CONNECT=0,e.DISCONNECT=1,e.EVENT=2,e.ACK=3,e.ERROR=4,e.BINARY_EVENT=5,e.BINARY_ACK=6,e.Encoder=r,e.Decoder=s;var o=e.ERROR+'"encode error"';function i(t){var r=""+t.type;if(e.BINARY_EVENT!==t.type&&e.BINARY_ACK!==t.type||(r+=t.attachments+"-"),t.nsp&&"/"!==t.nsp&&(r+=t.nsp+","),null!=t.id&&(r+=t.id),null!=t.data){var i=function(t){try{return JSON.stringify(t)}catch(t){return!1}}(t.data);if(!1===i)return o;r+=i}return n("encoded %j as %s",t,r),r}function s(){this.reconstructor=null}function a(t){this.reconPack=t,this.buffers=[]}function c(t){return{type:e.ERROR,data:"parser error: "+t}}r.prototype.encode=function(t,r){(n("encoding packet %j",t),e.BINARY_EVENT===t.type||e.BINARY_ACK===t.type)?function(t,e){Ue(t,(function(t){var n=qe(t),r=i(n.packet),o=n.buffers;o.unshift(r),e(o)}))}(t,r):r([i(t)])},Re(s.prototype),s.prototype.add=function(t){var r;if("string"==typeof t)r=function(t){var r=0,o={type:Number(t.charAt(0))};if(null==e.types[o.type])return c("unknown packet type "+o.type);if(e.BINARY_EVENT===o.type||e.BINARY_ACK===o.type){for(var i="";"-"!==t.charAt(++r)&&(i+=t.charAt(r),r!=t.length););if(i!=Number(i)||"-"!==t.charAt(r))throw new Error("Illegal attachments");o.attachments=Number(i)}if("/"===t.charAt(r+1))for(o.nsp="";++r;){if(","===(a=t.charAt(r)))break;if(o.nsp+=a,r===t.length)break}else o.nsp="/";var s=t.charAt(r+1);if(""!==s&&Number(s)==s){for(o.id="";++r;){var a;if(null==(a=t.charAt(r))||Number(a)!=a){--r;break}if(o.id+=t.charAt(r),r===t.length)break}o.id=Number(o.id)}if(t.charAt(++r)){var l=function(t){try{return JSON.parse(t)}catch(t){return!1}}(t.substr(r));if(!(!1!==l&&(o.type===e.ERROR||De(l))))return c("invalid payload");o.data=l}return n("decoded %s as %j",t,o),o}(t),e.BINARY_EVENT===r.type||e.BINARY_ACK===r.type?(this.reconstructor=new a(r),0===this.reconstructor.reconPack.attachments&&this.emit("decoded",r)):this.emit("decoded",r);else{if(!Ne(t)&&!t.base64)throw new Error("Unknown type: "+t);if(!this.reconstructor)throw new Error("got binary data when not reconstructing a packet");(r=this.reconstructor.takeBinaryData(t))&&(this.reconstructor=null,this.emit("decoded",r))}},s.prototype.destroy=function(){this.reconstructor&&this.reconstructor.finishedReconstruction()},a.prototype.takeBinaryData=function(t){if(this.buffers.push(t),this.buffers.length===this.reconPack.attachments){var e=Le(this.reconPack,this.buffers);return this.finishedReconstruction(),e}return null},a.prototype.finishedReconstruction=function(){this.reconPack=null,this.buffers=[]}})),He=(Ge.protocol,Ge.types,Ge.CONNECT,Ge.DISCONNECT,Ge.EVENT,Ge.ACK,Ge.ERROR,Ge.BINARY_EVENT,Ge.BINARY_ACK,Ge.Encoder,Ge.Decoder,fe((function(t){try{t.exports="undefined"!=typeof XMLHttpRequest&&"withCredentials"in new XMLHttpRequest}catch(e){t.exports=!1}}))),We="undefined"!=typeof self?self:"undefined"!=typeof window?window:Function("return this")(),Xe=function(t){var e=t.xdomain,n=t.xscheme,r=t.enablesXDR;try{if("undefined"!=typeof XMLHttpRequest&&(!e||He))return new XMLHttpRequest}catch(t){}try{if("undefined"!=typeof XDomainRequest&&!n&&r)return new XDomainRequest}catch(t){}if(!e)try{return new(We[["Active"].concat("Object").join("X")])("Microsoft.XMLHTTP")}catch(t){}},Ye=Object.keys||function(t){var e=[],n=Object.prototype.hasOwnProperty;for(var r in t)n.call(t,r)&&e.push(r);return e},Je={}.toString,Ve=Array.isArray||function(t){return"[object Array]"==Je.call(t)},Ze=Object.prototype.toString,Qe="function"==typeof Blob||"undefined"!=typeof Blob&&"[object BlobConstructor]"===Ze.call(Blob),tn="function"==typeof File||"undefined"!=typeof File&&"[object FileConstructor]"===Ze.call(File),en=function t(e){if(!e||"object"!=typeof e)return!1;if(Ve(e)){for(var n=0,r=e.length;n<r;n++)if(t(e[n]))return!0;return!1}if("function"==typeof Buffer&&Buffer.isBuffer&&Buffer.isBuffer(e)||"function"==typeof ArrayBuffer&&e instanceof ArrayBuffer||Qe&&e instanceof Blob||tn&&e instanceof File)return!0;if(e.toJSON&&"function"==typeof e.toJSON&&1===arguments.length)return t(e.toJSON(),!0);for(var o in e)if(Object.prototype.hasOwnProperty.call(e,o)&&t(e[o]))return!0;return!1};var nn=function(t,e,n){var r=t.byteLength;if(e=e||0,n=n||r,t.slice)return t.slice(e,n);if(e<0&&(e+=r),n<0&&(n+=r),n>r&&(n=r),e>=r||e>=n||0===r)return new ArrayBuffer(0);for(var o=new Uint8Array(t),i=new Uint8Array(n-e),s=e,a=0;s<n;s++,a++)i[a]=o[s];return i.buffer},rn=function(t,e,n){var r=!1;return n=n||on,o.count=t,0===t?e():o;function o(t,i){if(o.count<=0)throw new Error("after called too many times");--o.count,t?(r=!0,e(t),e=n):0!==o.count||r||e(null,i)}};function on(){}
/*! https://mths.be/utf8js v2.1.2 by @mathias */var sn,an,cn,ln=String.fromCharCode;function un(t){for(var e,n,r=[],o=0,i=t.length;o<i;)(e=t.charCodeAt(o++))>=55296&&e<=56319&&o<i?56320==(64512&(n=t.charCodeAt(o++)))?r.push(((1023&e)<<10)+(1023&n)+65536):(r.push(e),o--):r.push(e);return r}function hn(t,e){if(t>=55296&&t<=57343){if(e)throw Error("Lone surrogate U+"+t.toString(16).toUpperCase()+" is not a scalar value");return!1}return!0}function pn(t,e){return ln(t>>e&63|128)}function fn(t,e){if(0==(4294967168&t))return ln(t);var n="";return 0==(4294965248&t)?n=ln(t>>6&31|192):0==(4294901760&t)?(hn(t,e)||(t=65533),n=ln(t>>12&15|224),n+=pn(t,6)):0==(4292870144&t)&&(n=ln(t>>18&7|240),n+=pn(t,12),n+=pn(t,6)),n+=ln(63&t|128)}function dn(){if(cn>=an)throw Error("Invalid byte index");var t=255&sn[cn];if(cn++,128==(192&t))return 63&t;throw Error("Invalid continuation byte")}function mn(t){var e,n;if(cn>an)throw Error("Invalid byte index");if(cn==an)return!1;if(e=255&sn[cn],cn++,0==(128&e))return e;if(192==(224&e)){if((n=(31&e)<<6|dn())>=128)return n;throw Error("Invalid continuation byte")}if(224==(240&e)){if((n=(15&e)<<12|dn()<<6|dn())>=2048)return hn(n,t)?n:65533;throw Error("Invalid continuation byte")}if(240==(248&e)&&(n=(7&e)<<18|dn()<<12|dn()<<6|dn())>=65536&&n<=1114111)return n;throw Error("Invalid UTF-8 detected")}var gn={version:"2.1.2",encode:function(t,e){for(var n=!1!==(e=e||{}).strict,r=un(t),o=r.length,i=-1,s="";++i<o;)s+=fn(r[i],n);return s},decode:function(t,e){var n=!1!==(e=e||{}).strict;sn=un(t),an=sn.length,cn=0;for(var r,o=[];!1!==(r=mn(n));)o.push(r);return function(t){for(var e,n=t.length,r=-1,o="";++r<n;)(e=t[r])>65535&&(o+=ln((e-=65536)>>>10&1023|55296),e=56320|1023&e),o+=ln(e);return o}(o)}},bn=fe((function(t,e){!function(){for(var t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",n=new Uint8Array(256),r=0;r<t.length;r++)n[t.charCodeAt(r)]=r;e.encode=function(e){var n,r=new Uint8Array(e),o=r.length,i="";for(n=0;n<o;n+=3)i+=t[r[n]>>2],i+=t[(3&r[n])<<4|r[n+1]>>4],i+=t[(15&r[n+1])<<2|r[n+2]>>6],i+=t[63&r[n+2]];return o%3==2?i=i.substring(0,i.length-1)+"=":o%3==1&&(i=i.substring(0,i.length-2)+"=="),i},e.decode=function(t){var e,r,o,i,s,a=.75*t.length,c=t.length,l=0;"="===t[t.length-1]&&(a--,"="===t[t.length-2]&&a--);var u=new ArrayBuffer(a),h=new Uint8Array(u);for(e=0;e<c;e+=4)r=n[t.charCodeAt(e)],o=n[t.charCodeAt(e+1)],i=n[t.charCodeAt(e+2)],s=n[t.charCodeAt(e+3)],h[l++]=r<<2|o>>4,h[l++]=(15&o)<<4|i>>2,h[l++]=(3&i)<<6|63&s;return u}}()})),yn=(bn.encode,bn.decode,void 0!==yn?yn:"undefined"!=typeof WebKitBlobBuilder?WebKitBlobBuilder:"undefined"!=typeof MSBlobBuilder?MSBlobBuilder:"undefined"!=typeof MozBlobBuilder&&MozBlobBuilder),vn=function(){try{return 2===new Blob(["hi"]).size}catch(t){return!1}}(),wn=vn&&function(){try{return 2===new Blob([new Uint8Array([1,2])]).size}catch(t){return!1}}(),Cn=yn&&yn.prototype.append&&yn.prototype.getBlob;function An(t){return t.map((function(t){if(t.buffer instanceof ArrayBuffer){var e=t.buffer;if(t.byteLength!==e.byteLength){var n=new Uint8Array(t.byteLength);n.set(new Uint8Array(e,t.byteOffset,t.byteLength)),e=n.buffer}return e}return t}))}function kn(t,e){e=e||{};var n=new yn;return An(t).forEach((function(t){n.append(t)})),e.type?n.getBlob(e.type):n.getBlob()}function $n(t,e){return new Blob(An(t),e||{})}"undefined"!=typeof Blob&&(kn.prototype=Blob.prototype,$n.prototype=Blob.prototype);var xn=vn?wn?Blob:$n:Cn?kn:void 0,Bn=fe((function(t,e){var n;"undefined"!=typeof ArrayBuffer&&(n=bn);var r="undefined"!=typeof navigator&&/Android/i.test(navigator.userAgent),o="undefined"!=typeof navigator&&/PhantomJS/i.test(navigator.userAgent),i=r||o;e.protocol=3;var s=e.packets={open:0,close:1,ping:2,pong:3,message:4,upgrade:5,noop:6},a=Ye(s),c={type:"error",data:"parser error"};function l(t,e,n){for(var r=new Array(t.length),o=rn(t.length,n),i=function(t,n,o){e(n,(function(e,n){r[t]=n,o(e,r)}))},s=0;s<t.length;s++)i(s,t[s],o)}e.encodePacket=function(t,n,r,o){"function"==typeof n&&(o=n,n=!1),"function"==typeof r&&(o=r,r=null);var a=void 0===t.data?void 0:t.data.buffer||t.data;if("undefined"!=typeof ArrayBuffer&&a instanceof ArrayBuffer)return function(t,n,r){if(!n)return e.encodeBase64Packet(t,r);var o=t.data,i=new Uint8Array(o),a=new Uint8Array(1+o.byteLength);a[0]=s[t.type];for(var c=0;c<i.length;c++)a[c+1]=i[c];return r(a.buffer)}(t,n,o);if(void 0!==xn&&a instanceof xn)return function(t,n,r){if(!n)return e.encodeBase64Packet(t,r);if(i)return function(t,n,r){if(!n)return e.encodeBase64Packet(t,r);var o=new FileReader;return o.onload=function(){e.encodePacket({type:t.type,data:o.result},n,!0,r)},o.readAsArrayBuffer(t.data)}(t,n,r);var o=new Uint8Array(1);o[0]=s[t.type];var a=new xn([o.buffer,t.data]);return r(a)}(t,n,o);if(a&&a.base64)return function(t,n){var r="b"+e.packets[t.type]+t.data.data;return n(r)}(t,o);var c=s[t.type];return void 0!==t.data&&(c+=r?gn.encode(String(t.data),{strict:!1}):String(t.data)),o(""+c)},e.encodeBase64Packet=function(t,n){var r,o="b"+e.packets[t.type];if(void 0!==xn&&t.data instanceof xn){var i=new FileReader;return i.onload=function(){var t=i.result.split(",")[1];n(o+t)},i.readAsDataURL(t.data)}try{r=String.fromCharCode.apply(null,new Uint8Array(t.data))}catch(e){for(var s=new Uint8Array(t.data),a=new Array(s.length),c=0;c<s.length;c++)a[c]=s[c];r=String.fromCharCode.apply(null,a)}return o+=btoa(r),n(o)},e.decodePacket=function(t,n,r){if(void 0===t)return c;if("string"==typeof t){if("b"===t.charAt(0))return e.decodeBase64Packet(t.substr(1),n);if(r&&!1===(t=function(t){try{t=gn.decode(t,{strict:!1})}catch(t){return!1}return t}(t)))return c;var o=t.charAt(0);return Number(o)==o&&a[o]?t.length>1?{type:a[o],data:t.substring(1)}:{type:a[o]}:c}o=new Uint8Array(t)[0];var i=nn(t,1);return xn&&"blob"===n&&(i=new xn([i])),{type:a[o],data:i}},e.decodeBase64Packet=function(t,e){var r=a[t.charAt(0)];if(!n)return{type:r,data:{base64:!0,data:t.substr(1)}};var o=n.decode(t.substr(1));return"blob"===e&&xn&&(o=new xn([o])),{type:r,data:o}},e.encodePayload=function(t,n,r){"function"==typeof n&&(r=n,n=null);var o=en(t);if(n&&o)return xn&&!i?e.encodePayloadAsBlob(t,r):e.encodePayloadAsArrayBuffer(t,r);if(!t.length)return r("0:");l(t,(function(t,r){e.encodePacket(t,!!o&&n,!1,(function(t){r(null,function(t){return t.length+":"+t}(t))}))}),(function(t,e){return r(e.join(""))}))},e.decodePayload=function(t,n,r){if("string"!=typeof t)return e.decodePayloadAsBinary(t,n,r);var o;if("function"==typeof n&&(r=n,n=null),""===t)return r(c,0,1);for(var i,s,a="",l=0,u=t.length;l<u;l++){var h=t.charAt(l);if(":"===h){if(""===a||a!=(i=Number(a)))return r(c,0,1);if(a!=(s=t.substr(l+1,i)).length)return r(c,0,1);if(s.length){if(o=e.decodePacket(s,n,!1),c.type===o.type&&c.data===o.data)return r(c,0,1);if(!1===r(o,l+i,u))return}l+=i,a=""}else a+=h}return""!==a?r(c,0,1):void 0},e.encodePayloadAsArrayBuffer=function(t,n){if(!t.length)return n(new ArrayBuffer(0));l(t,(function(t,n){e.encodePacket(t,!0,!0,(function(t){return n(null,t)}))}),(function(t,e){var r=e.reduce((function(t,e){var n;return t+(n="string"==typeof e?e.length:e.byteLength).toString().length+n+2}),0),o=new Uint8Array(r),i=0;return e.forEach((function(t){var e="string"==typeof t,n=t;if(e){for(var r=new Uint8Array(t.length),s=0;s<t.length;s++)r[s]=t.charCodeAt(s);n=r.buffer}o[i++]=e?0:1;var a=n.byteLength.toString();for(s=0;s<a.length;s++)o[i++]=parseInt(a[s]);o[i++]=255;for(r=new Uint8Array(n),s=0;s<r.length;s++)o[i++]=r[s]})),n(o.buffer)}))},e.encodePayloadAsBlob=function(t,n){l(t,(function(t,n){e.encodePacket(t,!0,!0,(function(t){var e=new Uint8Array(1);if(e[0]=1,"string"==typeof t){for(var r=new Uint8Array(t.length),o=0;o<t.length;o++)r[o]=t.charCodeAt(o);t=r.buffer,e[0]=0}var i=(t instanceof ArrayBuffer?t.byteLength:t.size).toString(),s=new Uint8Array(i.length+1);for(o=0;o<i.length;o++)s[o]=parseInt(i[o]);if(s[i.length]=255,xn){var a=new xn([e.buffer,s.buffer,t]);n(null,a)}}))}),(function(t,e){return n(new xn(e))}))},e.decodePayloadAsBinary=function(t,n,r){"function"==typeof n&&(r=n,n=null);for(var o=t,i=[];o.byteLength>0;){for(var s=new Uint8Array(o),a=0===s[0],l="",u=1;255!==s[u];u++){if(l.length>310)return r(c,0,1);l+=s[u]}o=nn(o,2+l.length),l=parseInt(l);var h=nn(o,0,l);if(a)try{h=String.fromCharCode.apply(null,new Uint8Array(h))}catch(t){var p=new Uint8Array(h);h="";for(u=0;u<p.length;u++)h+=String.fromCharCode(p[u])}i.push(h),o=nn(o,l)}var f=i.length;i.forEach((function(t,o){r(e.decodePacket(t,n,!0),o,f)}))}})),En=(Bn.protocol,Bn.packets,Bn.encodePacket,Bn.encodeBase64Packet,Bn.decodePacket,Bn.decodeBase64Packet,Bn.encodePayload,Bn.decodePayload,Bn.encodePayloadAsArrayBuffer,Bn.encodePayloadAsBlob,Bn.decodePayloadAsBinary,fe((function(t){function e(t){if(t)return function(t){for(var n in e.prototype)t[n]=e.prototype[n];return t}(t)}t.exports=e,e.prototype.on=e.prototype.addEventListener=function(t,e){return this._callbacks=this._callbacks||{},(this._callbacks["$"+t]=this._callbacks["$"+t]||[]).push(e),this},e.prototype.once=function(t,e){function n(){this.off(t,n),e.apply(this,arguments)}return n.fn=e,this.on(t,n),this},e.prototype.off=e.prototype.removeListener=e.prototype.removeAllListeners=e.prototype.removeEventListener=function(t,e){if(this._callbacks=this._callbacks||{},0==arguments.length)return this._callbacks={},this;var n,r=this._callbacks["$"+t];if(!r)return this;if(1==arguments.length)return delete this._callbacks["$"+t],this;for(var o=0;o<r.length;o++)if((n=r[o])===e||n.fn===e){r.splice(o,1);break}return this},e.prototype.emit=function(t){this._callbacks=this._callbacks||{};var e=[].slice.call(arguments,1),n=this._callbacks["$"+t];if(n)for(var r=0,o=(n=n.slice(0)).length;r<o;++r)n[r].apply(this,e);return this},e.prototype.listeners=function(t){return this._callbacks=this._callbacks||{},this._callbacks["$"+t]||[]},e.prototype.hasListeners=function(t){return!!this.listeners(t).length}}))),Fn=Kn;function Kn(t){this.path=t.path,this.hostname=t.hostname,this.port=t.port,this.secure=t.secure,this.query=t.query,this.timestampParam=t.timestampParam,this.timestampRequests=t.timestampRequests,this.readyState="",this.agent=t.agent||!1,this.socket=t.socket,this.enablesXDR=t.enablesXDR,this.withCredentials=t.withCredentials,this.pfx=t.pfx,this.key=t.key,this.passphrase=t.passphrase,this.cert=t.cert,this.ca=t.ca,this.ciphers=t.ciphers,this.rejectUnauthorized=t.rejectUnauthorized,this.forceNode=t.forceNode,this.isReactNative=t.isReactNative,this.extraHeaders=t.extraHeaders,this.localAddress=t.localAddress}En(Kn.prototype),Kn.prototype.onError=function(t,e){var n=new Error(t);return n.type="TransportError",n.description=e,this.emit("error",n),this},Kn.prototype.open=function(){return"closed"!==this.readyState&&""!==this.readyState||(this.readyState="opening",this.doOpen()),this},Kn.prototype.close=function(){return"opening"!==this.readyState&&"open"!==this.readyState||(this.doClose(),this.onClose()),this},Kn.prototype.send=function(t){if("open"!==this.readyState)throw new Error("Transport not open");this.write(t)},Kn.prototype.onOpen=function(){this.readyState="open",this.writable=!0,this.emit("open")},Kn.prototype.onData=function(t){var e=Bn.decodePacket(t,this.socket.binaryType);this.onPacket(e)},Kn.prototype.onPacket=function(t){this.emit("packet",t)},Kn.prototype.onClose=function(){this.readyState="closed",this.emit("close")};var Tn,Sn=function(t){var e="";for(var n in t)t.hasOwnProperty(n)&&(e.length&&(e+="&"),e+=encodeURIComponent(n)+"="+encodeURIComponent(t[n]));return e},_n=function(t){for(var e={},n=t.split("&"),r=0,o=n.length;r<o;r++){var i=n[r].split("=");e[decodeURIComponent(i[0])]=decodeURIComponent(i[1])}return e},Rn=function(t,e){var n=function(){};n.prototype=e.prototype,t.prototype=new n,t.prototype.constructor=t},In="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz-_".split(""),Dn={},Nn=0,Mn=0;function On(t){var e="";do{e=In[t%64]+e,t=Math.floor(t/64)}while(t>0);return e}function Pn(){var t=On(+new Date);return t!==Tn?(Nn=0,Tn=t):t+"."+On(Nn++)}for(;Mn<64;Mn++)Dn[In[Mn]]=Mn;Pn.encode=On,Pn.decode=function(t){var e=0;for(Mn=0;Mn<t.length;Mn++)e=64*e+Dn[t.charAt(Mn)];return e};var jn=Pn,zn=$e("engine.io-client:polling"),qn=Un,Ln=null!=new Xe({xdomain:!1}).responseType;function Un(t){var e=t&&t.forceBase64;Ln&&!e||(this.supportsBinary=!1),Fn.call(this,t)}Rn(Un,Fn),Un.prototype.name="polling",Un.prototype.doOpen=function(){this.poll()},Un.prototype.pause=function(t){var e=this;function n(){zn("paused"),e.readyState="paused",t()}if(this.readyState="pausing",this.polling||!this.writable){var r=0;this.polling&&(zn("we are currently polling - waiting to pause"),r++,this.once("pollComplete",(function(){zn("pre-pause polling complete"),--r||n()}))),this.writable||(zn("we are currently writing - waiting to pause"),r++,this.once("drain",(function(){zn("pre-pause writing complete"),--r||n()})))}else n()},Un.prototype.poll=function(){zn("polling"),this.polling=!0,this.doPoll(),this.emit("poll")},Un.prototype.onData=function(t){var e=this;zn("polling got data %s",t);Bn.decodePayload(t,this.socket.binaryType,(function(t,n,r){if("opening"===e.readyState&&e.onOpen(),"close"===t.type)return e.onClose(),!1;e.onPacket(t)})),"closed"!==this.readyState&&(this.polling=!1,this.emit("pollComplete"),"open"===this.readyState?this.poll():zn('ignoring poll - transport state "%s"',this.readyState))},Un.prototype.doClose=function(){var t=this;function e(){zn("writing close packet"),t.write([{type:"close"}])}"open"===this.readyState?(zn("transport open - closing"),e()):(zn("transport not open - deferring close"),this.once("open",e))},Un.prototype.write=function(t){var e=this;this.writable=!1;var n=function(){e.writable=!0,e.emit("drain")};Bn.encodePayload(t,this.supportsBinary,(function(t){e.doWrite(t,n)}))},Un.prototype.uri=function(){var t=this.query||{},e=this.secure?"https":"http",n="";return!1!==this.timestampRequests&&(t[this.timestampParam]=jn()),this.supportsBinary||t.sid||(t.b64=1),t=Sn(t),this.port&&("https"===e&&443!==Number(this.port)||"http"===e&&80!==Number(this.port))&&(n=":"+this.port),t.length&&(t="?"+t),e+"://"+(-1!==this.hostname.indexOf(":")?"["+this.hostname+"]":this.hostname)+n+this.path+t};var Gn=$e("engine.io-client:polling-xhr"),Hn=Yn,Wn=Jn;function Xn(){}function Yn(t){if(qn.call(this,t),this.requestTimeout=t.requestTimeout,this.extraHeaders=t.extraHeaders,"undefined"!=typeof location){var e="https:"===location.protocol,n=location.port;n||(n=e?443:80),this.xd="undefined"!=typeof location&&t.hostname!==location.hostname||n!==t.port,this.xs=t.secure!==e}}function Jn(t){this.method=t.method||"GET",this.uri=t.uri,this.xd=!!t.xd,this.xs=!!t.xs,this.async=!1!==t.async,this.data=void 0!==t.data?t.data:null,this.agent=t.agent,this.isBinary=t.isBinary,this.supportsBinary=t.supportsBinary,this.enablesXDR=t.enablesXDR,this.withCredentials=t.withCredentials,this.requestTimeout=t.requestTimeout,this.pfx=t.pfx,this.key=t.key,this.passphrase=t.passphrase,this.cert=t.cert,this.ca=t.ca,this.ciphers=t.ciphers,this.rejectUnauthorized=t.rejectUnauthorized,this.extraHeaders=t.extraHeaders,this.create()}if(Rn(Yn,qn),Yn.prototype.supportsBinary=!0,Yn.prototype.request=function(t){return(t=t||{}).uri=this.uri(),t.xd=this.xd,t.xs=this.xs,t.agent=this.agent||!1,t.supportsBinary=this.supportsBinary,t.enablesXDR=this.enablesXDR,t.withCredentials=this.withCredentials,t.pfx=this.pfx,t.key=this.key,t.passphrase=this.passphrase,t.cert=this.cert,t.ca=this.ca,t.ciphers=this.ciphers,t.rejectUnauthorized=this.rejectUnauthorized,t.requestTimeout=this.requestTimeout,t.extraHeaders=this.extraHeaders,new Jn(t)},Yn.prototype.doWrite=function(t,e){var n="string"!=typeof t&&void 0!==t,r=this.request({method:"POST",data:t,isBinary:n}),o=this;r.on("success",e),r.on("error",(function(t){o.onError("xhr post error",t)})),this.sendXhr=r},Yn.prototype.doPoll=function(){Gn("xhr poll");var t=this.request(),e=this;t.on("data",(function(t){e.onData(t)})),t.on("error",(function(t){e.onError("xhr poll error",t)})),this.pollXhr=t},En(Jn.prototype),Jn.prototype.create=function(){var t={agent:this.agent,xdomain:this.xd,xscheme:this.xs,enablesXDR:this.enablesXDR};t.pfx=this.pfx,t.key=this.key,t.passphrase=this.passphrase,t.cert=this.cert,t.ca=this.ca,t.ciphers=this.ciphers,t.rejectUnauthorized=this.rejectUnauthorized;var e=this.xhr=new Xe(t),n=this;try{Gn("xhr open %s: %s",this.method,this.uri),e.open(this.method,this.uri,this.async);try{if(this.extraHeaders)for(var r in e.setDisableHeaderCheck&&e.setDisableHeaderCheck(!0),this.extraHeaders)this.extraHeaders.hasOwnProperty(r)&&e.setRequestHeader(r,this.extraHeaders[r])}catch(t){}if("POST"===this.method)try{this.isBinary?e.setRequestHeader("Content-type","application/octet-stream"):e.setRequestHeader("Content-type","text/plain;charset=UTF-8")}catch(t){}try{e.setRequestHeader("Accept","*/*")}catch(t){}"withCredentials"in e&&(e.withCredentials=this.withCredentials),this.requestTimeout&&(e.timeout=this.requestTimeout),this.hasXDR()?(e.onload=function(){n.onLoad()},e.onerror=function(){n.onError(e.responseText)}):e.onreadystatechange=function(){if(2===e.readyState)try{var t=e.getResponseHeader("Content-Type");(n.supportsBinary&&"application/octet-stream"===t||"application/octet-stream; charset=UTF-8"===t)&&(e.responseType="arraybuffer")}catch(t){}4===e.readyState&&(200===e.status||1223===e.status?n.onLoad():setTimeout((function(){n.onError("number"==typeof e.status?e.status:0)}),0))},Gn("xhr data %s",this.data),e.send(this.data)}catch(t){return void setTimeout((function(){n.onError(t)}),0)}"undefined"!=typeof document&&(this.index=Jn.requestsCount++,Jn.requests[this.index]=this)},Jn.prototype.onSuccess=function(){this.emit("success"),this.cleanup()},Jn.prototype.onData=function(t){this.emit("data",t),this.onSuccess()},Jn.prototype.onError=function(t){this.emit("error",t),this.cleanup(!0)},Jn.prototype.cleanup=function(t){if(void 0!==this.xhr&&null!==this.xhr){if(this.hasXDR()?this.xhr.onload=this.xhr.onerror=Xn:this.xhr.onreadystatechange=Xn,t)try{this.xhr.abort()}catch(t){}"undefined"!=typeof document&&delete Jn.requests[this.index],this.xhr=null}},Jn.prototype.onLoad=function(){var t;try{var e;try{e=this.xhr.getResponseHeader("Content-Type")}catch(t){}t=("application/octet-stream"===e||"application/octet-stream; charset=UTF-8"===e)&&this.xhr.response||this.xhr.responseText}catch(t){this.onError(t)}null!=t&&this.onData(t)},Jn.prototype.hasXDR=function(){return"undefined"!=typeof XDomainRequest&&!this.xs&&this.enablesXDR},Jn.prototype.abort=function(){this.cleanup()},Jn.requestsCount=0,Jn.requests={},"undefined"!=typeof document)if("function"==typeof attachEvent)attachEvent("onunload",Vn);else if("function"==typeof addEventListener){addEventListener("onpagehide"in We?"pagehide":"unload",Vn,!1)}function Vn(){for(var t in Jn.requests)Jn.requests.hasOwnProperty(t)&&Jn.requests[t].abort()}Hn.Request=Wn;var Zn,Qn=rr,tr=/\n/g,er=/\\n/g;function nr(){}function rr(t){qn.call(this,t),this.query=this.query||{},Zn||(Zn=We.___eio=We.___eio||[]),this.index=Zn.length;var e=this;Zn.push((function(t){e.onData(t)})),this.query.j=this.index,"function"==typeof addEventListener&&addEventListener("beforeunload",(function(){e.script&&(e.script.onerror=nr)}),!1)}Rn(rr,qn),rr.prototype.supportsBinary=!1,rr.prototype.doClose=function(){this.script&&(this.script.parentNode.removeChild(this.script),this.script=null),this.form&&(this.form.parentNode.removeChild(this.form),this.form=null,this.iframe=null),qn.prototype.doClose.call(this)},rr.prototype.doPoll=function(){var t=this,e=document.createElement("script");this.script&&(this.script.parentNode.removeChild(this.script),this.script=null),e.async=!0,e.src=this.uri(),e.onerror=function(e){t.onError("jsonp poll error",e)};var n=document.getElementsByTagName("script")[0];n?n.parentNode.insertBefore(e,n):(document.head||document.body).appendChild(e),this.script=e,"undefined"!=typeof navigator&&/gecko/i.test(navigator.userAgent)&&setTimeout((function(){var t=document.createElement("iframe");document.body.appendChild(t),document.body.removeChild(t)}),100)},rr.prototype.doWrite=function(t,e){var n=this;if(!this.form){var r,o=document.createElement("form"),i=document.createElement("textarea"),s=this.iframeId="eio_iframe_"+this.index;o.className="socketio",o.style.position="absolute",o.style.top="-1000px",o.style.left="-1000px",o.target=s,o.method="POST",o.setAttribute("accept-charset","utf-8"),i.name="d",o.appendChild(i),document.body.appendChild(o),this.form=o,this.area=i}function a(){c(),e()}function c(){if(n.iframe)try{n.form.removeChild(n.iframe)}catch(t){n.onError("jsonp polling iframe removal error",t)}try{var t='<iframe src="javascript:0" name="'+n.iframeId+'">';r=document.createElement(t)}catch(t){(r=document.createElement("iframe")).name=n.iframeId,r.src="javascript:0"}r.id=n.iframeId,n.form.appendChild(r),n.iframe=r}this.form.action=this.uri(),c(),t=t.replace(er,"\\\n"),this.area.value=t.replace(tr,"\\n");try{this.form.submit()}catch(t){}this.iframe.attachEvent?this.iframe.onreadystatechange=function(){"complete"===n.iframe.readyState&&a()}:this.iframe.onload=a};var or,ir,sr,ar=(or=Object.freeze({__proto__:null,default:{}}))&&or.default||or,cr=$e("engine.io-client:websocket");if("undefined"!=typeof WebSocket?ir=WebSocket:"undefined"!=typeof self&&(ir=self.WebSocket||self.MozWebSocket),"undefined"==typeof window)try{sr=ar}catch(t){}var lr=ir||sr,ur=hr;function hr(t){t&&t.forceBase64&&(this.supportsBinary=!1),this.perMessageDeflate=t.perMessageDeflate,this.usingBrowserWebSocket=ir&&!t.forceNode,this.protocols=t.protocols,this.usingBrowserWebSocket||(lr=sr),Fn.call(this,t)}Rn(hr,Fn),hr.prototype.name="websocket",hr.prototype.supportsBinary=!0,hr.prototype.doOpen=function(){if(this.check()){var t=this.uri(),e=this.protocols,n={agent:this.agent,perMessageDeflate:this.perMessageDeflate};n.pfx=this.pfx,n.key=this.key,n.passphrase=this.passphrase,n.cert=this.cert,n.ca=this.ca,n.ciphers=this.ciphers,n.rejectUnauthorized=this.rejectUnauthorized,this.extraHeaders&&(n.headers=this.extraHeaders),this.localAddress&&(n.localAddress=this.localAddress);try{this.ws=this.usingBrowserWebSocket&&!this.isReactNative?e?new lr(t,e):new lr(t):new lr(t,e,n)}catch(t){return this.emit("error",t)}void 0===this.ws.binaryType&&(this.supportsBinary=!1),this.ws.supports&&this.ws.supports.binary?(this.supportsBinary=!0,this.ws.binaryType="nodebuffer"):this.ws.binaryType="arraybuffer",this.addEventListeners()}},hr.prototype.addEventListeners=function(){var t=this;this.ws.onopen=function(){t.onOpen()},this.ws.onclose=function(){t.onClose()},this.ws.onmessage=function(e){t.onData(e.data)},this.ws.onerror=function(e){t.onError("websocket error",e)}},hr.prototype.write=function(t){var e=this;this.writable=!1;for(var n=t.length,r=0,o=n;r<o;r++)!function(t){Bn.encodePacket(t,e.supportsBinary,(function(r){if(!e.usingBrowserWebSocket){var o={};if(t.options&&(o.compress=t.options.compress),e.perMessageDeflate)("string"==typeof r?Buffer.byteLength(r):r.length)<e.perMessageDeflate.threshold&&(o.compress=!1)}try{e.usingBrowserWebSocket?e.ws.send(r):e.ws.send(r,o)}catch(t){cr("websocket closed before onclose event")}--n||i()}))}(t[r]);function i(){e.emit("flush"),setTimeout((function(){e.writable=!0,e.emit("drain")}),0)}},hr.prototype.onClose=function(){Fn.prototype.onClose.call(this)},hr.prototype.doClose=function(){void 0!==this.ws&&this.ws.close()},hr.prototype.uri=function(){var t=this.query||{},e=this.secure?"wss":"ws",n="";return this.port&&("wss"===e&&443!==Number(this.port)||"ws"===e&&80!==Number(this.port))&&(n=":"+this.port),this.timestampRequests&&(t[this.timestampParam]=jn()),this.supportsBinary||(t.b64=1),(t=Sn(t)).length&&(t="?"+t),e+"://"+(-1!==this.hostname.indexOf(":")?"["+this.hostname+"]":this.hostname)+n+this.path+t},hr.prototype.check=function(){return!(!lr||"__initialize"in lr&&this.name===hr.prototype.name)};var pr={polling:function(t){var e=!1,n=!1,r=!1!==t.jsonp;if("undefined"!=typeof location){var o="https:"===location.protocol,i=location.port;i||(i=o?443:80),e=t.hostname!==location.hostname||i!==t.port,n=t.secure!==o}if(t.xdomain=e,t.xscheme=n,"open"in new Xe(t)&&!t.forceJSONP)return new Hn(t);if(!r)throw new Error("JSONP disabled");return new Qn(t)},websocket:ur},fr=[].indexOf,dr=function(t,e){if(fr)return t.indexOf(e);for(var n=0;n<t.length;++n)if(t[n]===e)return n;return-1},mr=$e("engine.io-client:socket"),gr=br;function br(t,e){if(!(this instanceof br))return new br(t,e);e=e||{},t&&"object"==typeof t&&(e=t,t=null),t?(t=ge(t),e.hostname=t.host,e.secure="https"===t.protocol||"wss"===t.protocol,e.port=t.port,t.query&&(e.query=t.query)):e.host&&(e.hostname=ge(e.host).host),this.secure=null!=e.secure?e.secure:"undefined"!=typeof location&&"https:"===location.protocol,e.hostname&&!e.port&&(e.port=this.secure?"443":"80"),this.agent=e.agent||!1,this.hostname=e.hostname||("undefined"!=typeof location?location.hostname:"localhost"),this.port=e.port||("undefined"!=typeof location&&location.port?location.port:this.secure?443:80),this.query=e.query||{},"string"==typeof this.query&&(this.query=_n(this.query)),this.upgrade=!1!==e.upgrade,this.path=(e.path||"/engine.io").replace(/\/$/,"")+"/",this.forceJSONP=!!e.forceJSONP,this.jsonp=!1!==e.jsonp,this.forceBase64=!!e.forceBase64,this.enablesXDR=!!e.enablesXDR,this.withCredentials=!1!==e.withCredentials,this.timestampParam=e.timestampParam||"t",this.timestampRequests=e.timestampRequests,this.transports=e.transports||["polling","websocket"],this.transportOptions=e.transportOptions||{},this.readyState="",this.writeBuffer=[],this.prevBufferLen=0,this.policyPort=e.policyPort||843,this.rememberUpgrade=e.rememberUpgrade||!1,this.binaryType=null,this.onlyBinaryUpgrades=e.onlyBinaryUpgrades,this.perMessageDeflate=!1!==e.perMessageDeflate&&(e.perMessageDeflate||{}),!0===this.perMessageDeflate&&(this.perMessageDeflate={}),this.perMessageDeflate&&null==this.perMessageDeflate.threshold&&(this.perMessageDeflate.threshold=1024),this.pfx=e.pfx||null,this.key=e.key||null,this.passphrase=e.passphrase||null,this.cert=e.cert||null,this.ca=e.ca||null,this.ciphers=e.ciphers||null,this.rejectUnauthorized=void 0===e.rejectUnauthorized||e.rejectUnauthorized,this.forceNode=!!e.forceNode,this.isReactNative="undefined"!=typeof navigator&&"string"==typeof navigator.product&&"reactnative"===navigator.product.toLowerCase(),("undefined"==typeof self||this.isReactNative)&&(e.extraHeaders&&Object.keys(e.extraHeaders).length>0&&(this.extraHeaders=e.extraHeaders),e.localAddress&&(this.localAddress=e.localAddress)),this.id=null,this.upgrades=null,this.pingInterval=null,this.pingTimeout=null,this.pingIntervalTimer=null,this.pingTimeoutTimer=null,this.open()}br.priorWebsocketSuccess=!1,En(br.prototype),br.protocol=Bn.protocol,br.Socket=br,br.Transport=Fn,br.transports=pr,br.parser=Bn,br.prototype.createTransport=function(t){mr('creating transport "%s"',t);var e=function(t){var e={};for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n]);return e}(this.query);e.EIO=Bn.protocol,e.transport=t;var n=this.transportOptions[t]||{};return this.id&&(e.sid=this.id),new pr[t]({query:e,socket:this,agent:n.agent||this.agent,hostname:n.hostname||this.hostname,port:n.port||this.port,secure:n.secure||this.secure,path:n.path||this.path,forceJSONP:n.forceJSONP||this.forceJSONP,jsonp:n.jsonp||this.jsonp,forceBase64:n.forceBase64||this.forceBase64,enablesXDR:n.enablesXDR||this.enablesXDR,withCredentials:n.withCredentials||this.withCredentials,timestampRequests:n.timestampRequests||this.timestampRequests,timestampParam:n.timestampParam||this.timestampParam,policyPort:n.policyPort||this.policyPort,pfx:n.pfx||this.pfx,key:n.key||this.key,passphrase:n.passphrase||this.passphrase,cert:n.cert||this.cert,ca:n.ca||this.ca,ciphers:n.ciphers||this.ciphers,rejectUnauthorized:n.rejectUnauthorized||this.rejectUnauthorized,perMessageDeflate:n.perMessageDeflate||this.perMessageDeflate,extraHeaders:n.extraHeaders||this.extraHeaders,forceNode:n.forceNode||this.forceNode,localAddress:n.localAddress||this.localAddress,requestTimeout:n.requestTimeout||this.requestTimeout,protocols:n.protocols||void 0,isReactNative:this.isReactNative})},br.prototype.open=function(){var t;if(this.rememberUpgrade&&br.priorWebsocketSuccess&&-1!==this.transports.indexOf("websocket"))t="websocket";else{if(0===this.transports.length){var e=this;return void setTimeout((function(){e.emit("error","No transports available")}),0)}t=this.transports[0]}this.readyState="opening";try{t=this.createTransport(t)}catch(t){return this.transports.shift(),void this.open()}t.open(),this.setTransport(t)},br.prototype.setTransport=function(t){mr("setting transport %s",t.name);var e=this;this.transport&&(mr("clearing existing transport %s",this.transport.name),this.transport.removeAllListeners()),this.transport=t,t.on("drain",(function(){e.onDrain()})).on("packet",(function(t){e.onPacket(t)})).on("error",(function(t){e.onError(t)})).on("close",(function(){e.onClose("transport close")}))},br.prototype.probe=function(t){mr('probing transport "%s"',t);var e=this.createTransport(t,{probe:1}),n=!1,r=this;function o(){if(r.onlyBinaryUpgrades){var o=!this.supportsBinary&&r.transport.supportsBinary;n=n||o}n||(mr('probe transport "%s" opened',t),e.send([{type:"ping",data:"probe"}]),e.once("packet",(function(o){if(!n)if("pong"===o.type&&"probe"===o.data){if(mr('probe transport "%s" pong',t),r.upgrading=!0,r.emit("upgrading",e),!e)return;br.priorWebsocketSuccess="websocket"===e.name,mr('pausing current transport "%s"',r.transport.name),r.transport.pause((function(){n||"closed"!==r.readyState&&(mr("changing transport and sending upgrade packet"),u(),r.setTransport(e),e.send([{type:"upgrade"}]),r.emit("upgrade",e),e=null,r.upgrading=!1,r.flush())}))}else{mr('probe transport "%s" failed',t);var i=new Error("probe error");i.transport=e.name,r.emit("upgradeError",i)}})))}function i(){n||(n=!0,u(),e.close(),e=null)}function s(n){var o=new Error("probe error: "+n);o.transport=e.name,i(),mr('probe transport "%s" failed because of error: %s',t,n),r.emit("upgradeError",o)}function a(){s("transport closed")}function c(){s("socket closed")}function l(t){e&&t.name!==e.name&&(mr('"%s" works - aborting "%s"',t.name,e.name),i())}function u(){e.removeListener("open",o),e.removeListener("error",s),e.removeListener("close",a),r.removeListener("close",c),r.removeListener("upgrading",l)}br.priorWebsocketSuccess=!1,e.once("open",o),e.once("error",s),e.once("close",a),this.once("close",c),this.once("upgrading",l),e.open()},br.prototype.onOpen=function(){if(mr("socket open"),this.readyState="open",br.priorWebsocketSuccess="websocket"===this.transport.name,this.emit("open"),this.flush(),"open"===this.readyState&&this.upgrade&&this.transport.pause){mr("starting upgrade probes");for(var t=0,e=this.upgrades.length;t<e;t++)this.probe(this.upgrades[t])}},br.prototype.onPacket=function(t){if("opening"===this.readyState||"open"===this.readyState||"closing"===this.readyState)switch(mr('socket receive: type "%s", data "%s"',t.type,t.data),this.emit("packet",t),this.emit("heartbeat"),t.type){case"open":this.onHandshake(JSON.parse(t.data));break;case"pong":this.setPing(),this.emit("pong");break;case"error":var e=new Error("server error");e.code=t.data,this.onError(e);break;case"message":this.emit("data",t.data),this.emit("message",t.data)}else mr('packet received with socket readyState "%s"',this.readyState)},br.prototype.onHandshake=function(t){this.emit("handshake",t),this.id=t.sid,this.transport.query.sid=t.sid,this.upgrades=this.filterUpgrades(t.upgrades),this.pingInterval=t.pingInterval,this.pingTimeout=t.pingTimeout,this.onOpen(),"closed"!==this.readyState&&(this.setPing(),this.removeListener("heartbeat",this.onHeartbeat),this.on("heartbeat",this.onHeartbeat))},br.prototype.onHeartbeat=function(t){clearTimeout(this.pingTimeoutTimer);var e=this;e.pingTimeoutTimer=setTimeout((function(){"closed"!==e.readyState&&e.onClose("ping timeout")}),t||e.pingInterval+e.pingTimeout)},br.prototype.setPing=function(){var t=this;clearTimeout(t.pingIntervalTimer),t.pingIntervalTimer=setTimeout((function(){mr("writing ping packet - expecting pong within %sms",t.pingTimeout),t.ping(),t.onHeartbeat(t.pingTimeout)}),t.pingInterval)},br.prototype.ping=function(){var t=this;this.sendPacket("ping",(function(){t.emit("ping")}))},br.prototype.onDrain=function(){this.writeBuffer.splice(0,this.prevBufferLen),this.prevBufferLen=0,0===this.writeBuffer.length?this.emit("drain"):this.flush()},br.prototype.flush=function(){"closed"!==this.readyState&&this.transport.writable&&!this.upgrading&&this.writeBuffer.length&&(mr("flushing %d packets in socket",this.writeBuffer.length),this.transport.send(this.writeBuffer),this.prevBufferLen=this.writeBuffer.length,this.emit("flush"))},br.prototype.write=br.prototype.send=function(t,e,n){return this.sendPacket("message",t,e,n),this},br.prototype.sendPacket=function(t,e,n,r){if("function"==typeof e&&(r=e,e=void 0),"function"==typeof n&&(r=n,n=null),"closing"!==this.readyState&&"closed"!==this.readyState){(n=n||{}).compress=!1!==n.compress;var o={type:t,data:e,options:n};this.emit("packetCreate",o),this.writeBuffer.push(o),r&&this.once("flush",r),this.flush()}},br.prototype.close=function(){if("opening"===this.readyState||"open"===this.readyState){this.readyState="closing";var t=this;this.writeBuffer.length?this.once("drain",(function(){this.upgrading?r():e()})):this.upgrading?r():e()}function e(){t.onClose("forced close"),mr("socket closing - telling transport to close"),t.transport.close()}function n(){t.removeListener("upgrade",n),t.removeListener("upgradeError",n),e()}function r(){t.once("upgrade",n),t.once("upgradeError",n)}return this},br.prototype.onError=function(t){mr("socket error %j",t),br.priorWebsocketSuccess=!1,this.emit("error",t),this.onClose("transport error",t)},br.prototype.onClose=function(t,e){if("opening"===this.readyState||"open"===this.readyState||"closing"===this.readyState){mr('socket close with reason: "%s"',t);clearTimeout(this.pingIntervalTimer),clearTimeout(this.pingTimeoutTimer),this.transport.removeAllListeners("close"),this.transport.close(),this.transport.removeAllListeners(),this.readyState="closed",this.id=null,this.emit("close",t,e),this.writeBuffer=[],this.prevBufferLen=0}},br.prototype.filterUpgrades=function(t){for(var e=[],n=0,r=t.length;n<r;n++)~dr(this.transports,t[n])&&e.push(t[n]);return e};var yr=gr,vr=Bn;yr.parser=vr;var wr=function(t,e){for(var n=[],r=(e=e||0)||0;r<t.length;r++)n[r-e]=t[r];return n};var Cr=function(t,e,n){return t.on(e,n),{destroy:function(){t.removeListener(e,n)}}};var Ar=[].slice,kr=function(t,e){if("string"==typeof e&&(e=t[e]),"function"!=typeof e)throw new Error("bind() requires a function");var n=Ar.call(arguments,2);return function(){return e.apply(t,n.concat(Ar.call(arguments)))}},$r=fe((function(t,e){var n=$e("socket.io-client:socket");t.exports=i;var r={connect:1,connect_error:1,connect_timeout:1,connecting:1,disconnect:1,error:1,reconnect:1,reconnect_attempt:1,reconnect_failed:1,reconnect_error:1,reconnecting:1,ping:1,pong:1},o=Re.prototype.emit;function i(t,e,n){this.io=t,this.nsp=e,this.json=this,this.ids=0,this.acks={},this.receiveBuffer=[],this.sendBuffer=[],this.connected=!1,this.disconnected=!0,this.flags={},n&&n.query&&(this.query=n.query),this.io.autoConnect&&this.open()}Re(i.prototype),i.prototype.subEvents=function(){if(!this.subs){var t=this.io;this.subs=[Cr(t,"open",kr(this,"onopen")),Cr(t,"packet",kr(this,"onpacket")),Cr(t,"close",kr(this,"onclose"))]}},i.prototype.open=i.prototype.connect=function(){return this.connected||(this.subEvents(),this.io.open(),"open"===this.io.readyState&&this.onopen(),this.emit("connecting")),this},i.prototype.send=function(){var t=wr(arguments);return t.unshift("message"),this.emit.apply(this,t),this},i.prototype.emit=function(t){if(r.hasOwnProperty(t))return o.apply(this,arguments),this;var e=wr(arguments),i={type:(void 0!==this.flags.binary?this.flags.binary:en(e))?Ge.BINARY_EVENT:Ge.EVENT,data:e,options:{}};return i.options.compress=!this.flags||!1!==this.flags.compress,"function"==typeof e[e.length-1]&&(n("emitting packet with ack id %d",this.ids),this.acks[this.ids]=e.pop(),i.id=this.ids++),this.connected?this.packet(i):this.sendBuffer.push(i),this.flags={},this},i.prototype.packet=function(t){t.nsp=this.nsp,this.io.packet(t)},i.prototype.onopen=function(){if(n("transport is open - connecting"),"/"!==this.nsp)if(this.query){var t="object"==typeof this.query?Sn(this.query):this.query;n("sending connect packet with query %s",t),this.packet({type:Ge.CONNECT,query:t})}else this.packet({type:Ge.CONNECT})},i.prototype.onclose=function(t){n("close (%s)",t),this.connected=!1,this.disconnected=!0,delete this.id,this.emit("disconnect",t)},i.prototype.onpacket=function(t){var e=t.nsp===this.nsp,n=t.type===Ge.ERROR&&"/"===t.nsp;if(e||n)switch(t.type){case Ge.CONNECT:this.onconnect();break;case Ge.EVENT:case Ge.BINARY_EVENT:this.onevent(t);break;case Ge.ACK:case Ge.BINARY_ACK:this.onack(t);break;case Ge.DISCONNECT:this.ondisconnect();break;case Ge.ERROR:this.emit("error",t.data)}},i.prototype.onevent=function(t){var e=t.data||[];n("emitting event %j",e),null!=t.id&&(n("attaching ack callback to event"),e.push(this.ack(t.id))),this.connected?o.apply(this,e):this.receiveBuffer.push(e)},i.prototype.ack=function(t){var e=this,r=!1;return function(){if(!r){r=!0;var o=wr(arguments);n("sending ack %j",o),e.packet({type:en(o)?Ge.BINARY_ACK:Ge.ACK,id:t,data:o})}}},i.prototype.onack=function(t){var e=this.acks[t.id];"function"==typeof e?(n("calling ack %s with %j",t.id,t.data),e.apply(this,t.data),delete this.acks[t.id]):n("bad ack %s",t.id)},i.prototype.onconnect=function(){this.connected=!0,this.disconnected=!1,this.emit("connect"),this.emitBuffered()},i.prototype.emitBuffered=function(){var t;for(t=0;t<this.receiveBuffer.length;t++)o.apply(this,this.receiveBuffer[t]);for(this.receiveBuffer=[],t=0;t<this.sendBuffer.length;t++)this.packet(this.sendBuffer[t]);this.sendBuffer=[]},i.prototype.ondisconnect=function(){n("server disconnect (%s)",this.nsp),this.destroy(),this.onclose("io server disconnect")},i.prototype.destroy=function(){if(this.subs){for(var t=0;t<this.subs.length;t++)this.subs[t].destroy();this.subs=null}this.io.destroy(this)},i.prototype.close=i.prototype.disconnect=function(){return this.connected&&(n("performing disconnect (%s)",this.nsp),this.packet({type:Ge.DISCONNECT})),this.destroy(),this.connected&&this.onclose("io client disconnect"),this},i.prototype.compress=function(t){return this.flags.compress=t,this},i.prototype.binary=function(t){return this.flags.binary=t,this}})),xr=Br;function Br(t){t=t||{},this.ms=t.min||100,this.max=t.max||1e4,this.factor=t.factor||2,this.jitter=t.jitter>0&&t.jitter<=1?t.jitter:0,this.attempts=0}Br.prototype.duration=function(){var t=this.ms*Math.pow(this.factor,this.attempts++);if(this.jitter){var e=Math.random(),n=Math.floor(e*this.jitter*t);t=0==(1&Math.floor(10*e))?t-n:t+n}return 0|Math.min(t,this.max)},Br.prototype.reset=function(){this.attempts=0},Br.prototype.setMin=function(t){this.ms=t},Br.prototype.setMax=function(t){this.max=t},Br.prototype.setJitter=function(t){this.jitter=t};var Er=$e("socket.io-client:manager"),Fr=Object.prototype.hasOwnProperty,Kr=Tr;function Tr(t,e){if(!(this instanceof Tr))return new Tr(t,e);t&&"object"==typeof t&&(e=t,t=void 0),(e=e||{}).path=e.path||"/socket.io",this.nsps={},this.subs=[],this.opts=e,this.reconnection(!1!==e.reconnection),this.reconnectionAttempts(e.reconnectionAttempts||1/0),this.reconnectionDelay(e.reconnectionDelay||1e3),this.reconnectionDelayMax(e.reconnectionDelayMax||5e3),this.randomizationFactor(e.randomizationFactor||.5),this.backoff=new xr({min:this.reconnectionDelay(),max:this.reconnectionDelayMax(),jitter:this.randomizationFactor()}),this.timeout(null==e.timeout?2e4:e.timeout),this.readyState="closed",this.uri=t,this.connecting=[],this.lastPing=null,this.encoding=!1,this.packetBuffer=[];var n=e.parser||Ge;this.encoder=new n.Encoder,this.decoder=new n.Decoder,this.autoConnect=!1!==e.autoConnect,this.autoConnect&&this.open()}Tr.prototype.emitAll=function(){for(var t in this.emit.apply(this,arguments),this.nsps)Fr.call(this.nsps,t)&&this.nsps[t].emit.apply(this.nsps[t],arguments)},Tr.prototype.updateSocketIds=function(){for(var t in this.nsps)Fr.call(this.nsps,t)&&(this.nsps[t].id=this.generateId(t))},Tr.prototype.generateId=function(t){return("/"===t?"":t+"#")+this.engine.id},Re(Tr.prototype),Tr.prototype.reconnection=function(t){return arguments.length?(this._reconnection=!!t,this):this._reconnection},Tr.prototype.reconnectionAttempts=function(t){return arguments.length?(this._reconnectionAttempts=t,this):this._reconnectionAttempts},Tr.prototype.reconnectionDelay=function(t){return arguments.length?(this._reconnectionDelay=t,this.backoff&&this.backoff.setMin(t),this):this._reconnectionDelay},Tr.prototype.randomizationFactor=function(t){return arguments.length?(this._randomizationFactor=t,this.backoff&&this.backoff.setJitter(t),this):this._randomizationFactor},Tr.prototype.reconnectionDelayMax=function(t){return arguments.length?(this._reconnectionDelayMax=t,this.backoff&&this.backoff.setMax(t),this):this._reconnectionDelayMax},Tr.prototype.timeout=function(t){return arguments.length?(this._timeout=t,this):this._timeout},Tr.prototype.maybeReconnectOnOpen=function(){!this.reconnecting&&this._reconnection&&0===this.backoff.attempts&&this.reconnect()},Tr.prototype.open=Tr.prototype.connect=function(t,e){if(Er("readyState %s",this.readyState),~this.readyState.indexOf("open"))return this;Er("opening %s",this.uri),this.engine=yr(this.uri,this.opts);var n=this.engine,r=this;this.readyState="opening",this.skipReconnect=!1;var o=Cr(n,"open",(function(){r.onopen(),t&&t()})),i=Cr(n,"error",(function(e){if(Er("connect_error"),r.cleanup(),r.readyState="closed",r.emitAll("connect_error",e),t){var n=new Error("Connection error");n.data=e,t(n)}else r.maybeReconnectOnOpen()}));if(!1!==this._timeout){var s=this._timeout;Er("connect attempt will timeout after %d",s);var a=setTimeout((function(){Er("connect attempt timed out after %d",s),o.destroy(),n.close(),n.emit("error","timeout"),r.emitAll("connect_timeout",s)}),s);this.subs.push({destroy:function(){clearTimeout(a)}})}return this.subs.push(o),this.subs.push(i),this},Tr.prototype.onopen=function(){Er("open"),this.cleanup(),this.readyState="open",this.emit("open");var t=this.engine;this.subs.push(Cr(t,"data",kr(this,"ondata"))),this.subs.push(Cr(t,"ping",kr(this,"onping"))),this.subs.push(Cr(t,"pong",kr(this,"onpong"))),this.subs.push(Cr(t,"error",kr(this,"onerror"))),this.subs.push(Cr(t,"close",kr(this,"onclose"))),this.subs.push(Cr(this.decoder,"decoded",kr(this,"ondecoded")))},Tr.prototype.onping=function(){this.lastPing=new Date,this.emitAll("ping")},Tr.prototype.onpong=function(){this.emitAll("pong",new Date-this.lastPing)},Tr.prototype.ondata=function(t){this.decoder.add(t)},Tr.prototype.ondecoded=function(t){this.emit("packet",t)},Tr.prototype.onerror=function(t){Er("error",t),this.emitAll("error",t)},Tr.prototype.socket=function(t,e){var n=this.nsps[t];if(!n){n=new $r(this,t,e),this.nsps[t]=n;var r=this;n.on("connecting",o),n.on("connect",(function(){n.id=r.generateId(t)})),this.autoConnect&&o()}function o(){~dr(r.connecting,n)||r.connecting.push(n)}return n},Tr.prototype.destroy=function(t){var e=dr(this.connecting,t);~e&&this.connecting.splice(e,1),this.connecting.length||this.close()},Tr.prototype.packet=function(t){Er("writing packet %j",t);var e=this;t.query&&0===t.type&&(t.nsp+="?"+t.query),e.encoding?e.packetBuffer.push(t):(e.encoding=!0,this.encoder.encode(t,(function(n){for(var r=0;r<n.length;r++)e.engine.write(n[r],t.options);e.encoding=!1,e.processPacketQueue()})))},Tr.prototype.processPacketQueue=function(){if(this.packetBuffer.length>0&&!this.encoding){var t=this.packetBuffer.shift();this.packet(t)}},Tr.prototype.cleanup=function(){Er("cleanup");for(var t=this.subs.length,e=0;e<t;e++){this.subs.shift().destroy()}this.packetBuffer=[],this.encoding=!1,this.lastPing=null,this.decoder.destroy()},Tr.prototype.close=Tr.prototype.disconnect=function(){Er("disconnect"),this.skipReconnect=!0,this.reconnecting=!1,"opening"===this.readyState&&this.cleanup(),this.backoff.reset(),this.readyState="closed",this.engine&&this.engine.close()},Tr.prototype.onclose=function(t){Er("onclose"),this.cleanup(),this.backoff.reset(),this.readyState="closed",this.emit("close",t),this._reconnection&&!this.skipReconnect&&this.reconnect()},Tr.prototype.reconnect=function(){if(this.reconnecting||this.skipReconnect)return this;var t=this;if(this.backoff.attempts>=this._reconnectionAttempts)Er("reconnect failed"),this.backoff.reset(),this.emitAll("reconnect_failed"),this.reconnecting=!1;else{var e=this.backoff.duration();Er("will wait %dms before reconnect attempt",e),this.reconnecting=!0;var n=setTimeout((function(){t.skipReconnect||(Er("attempting reconnect"),t.emitAll("reconnect_attempt",t.backoff.attempts),t.emitAll("reconnecting",t.backoff.attempts),t.skipReconnect||t.open((function(e){e?(Er("reconnect attempt error"),t.reconnecting=!1,t.reconnect(),t.emitAll("reconnect_error",e.data)):(Er("reconnect success"),t.onreconnect())})))}),e);this.subs.push({destroy:function(){clearTimeout(n)}})}},Tr.prototype.onreconnect=function(){var t=this.backoff.attempts;this.reconnecting=!1,this.backoff.reset(),this.updateSocketIds(),this.emitAll("reconnect",t)};var Sr=fe((function(t,e){var n=$e("socket.io-client");t.exports=e=o;var r=e.managers={};function o(t,e){"object"==typeof t&&(e=t,t=void 0),e=e||{};var o,i=Be(t),s=i.source,a=i.id,c=i.path,l=r[a]&&c in r[a].nsps;return e.forceNew||e["force new connection"]||!1===e.multiplex||l?(n("ignoring socket cache for %s",s),o=Kr(s,e)):(r[a]||(n("new io instance for %s",s),r[a]=Kr(s,e)),o=r[a]),i.query&&!e.query&&(e.query=i.query),o.socket(i.path,e)}e.protocol=Ge.protocol,e.connect=o,e.Manager=Kr,e.Socket=$r}));Sr.managers,Sr.protocol,Sr.connect,Sr.Manager,Sr.Socket;function _r(){return qt.encode()+Kt[63]+pe.encode()+jt.encode()}function Rr(t,e=!1){qt.decode(t);let n=!1;t&&(n=2===t.split(Kt[63]).length&&t.split(Kt[63])[1]),jt.decode(n),pe.decode(n)}const Ir=Ft(!1);function Dr(t,e,n){const r=t.slice();return r[38]=e[n],r[40]=n,r}function Nr(t,e,n){const r=t.slice();return r[35]=e[n],r[37]=n,r}function Mr(t){let e,n;return{c(){e=x("img"),S(e,"class","marble svelte-11rckbw"),e.src!==(n=t[7]+"images/marble"+t[4].marble.color+".svg")&&S(e,"src",n),S(e,"alt","")},m(n,r){A(n,e,r),t[24](e)},p(t,r){144&r[0]&&e.src!==(n=t[7]+"images/marble"+t[4].marble.color+".svg")&&S(e,"src",n)},d(n){n&&k(e),t[24](null)}}}function Or(t){let e,n;return{c(){e=x("img"),S(e,"class","marble svelte-11rckbw"),e.src!==(n=t[7]+"images/marble"+t[4].marble.color+".svg")&&S(e,"src",n),S(e,"alt","")},m(n,r){A(n,e,r),t[25](e)},p(t,r){144&r[0]&&e.src!==(n=t[7]+"images/marble"+t[4].marble.color+".svg")&&S(e,"src",n)},d(n){n&&k(e),t[25](null)}}}function Pr(e){let n;return{c(){n=x("div"),S(n,"class","position blank svelte-11rckbw")},m(t,e){A(t,n,e)},p:t,d(t){t&&k(n)}}}function jr(t){let e,n,r;function i(t,e){return t[38]?qr:((null==n||16&e[0])&&(n=!!t[9](t[40],t[37])),n?zr:void 0)}let s=i(t,[-1]),a=s&&s(t);function c(...e){return t[28](t[40],t[37],...e)}function l(...e){return t[29](t[40],t[37],...e)}return{c(){e=x("div"),a&&a.c(),S(e,"class","position svelte-11rckbw"),D(e,"occupied",t[38]&&!t[38].locked),D(e,"empty",!t[38]),D(e,"slot",t[4].hasSlot(t[40],t[37]))},m(t,n,i){A(t,e,n),a&&a.m(e,null),i&&o(r),r=[K(e,"mousedown",c),K(e,"touchstart",l)]},p(n,r){s===(s=i(t=n,r))&&a?a.p(t,r):(a&&a.d(1),a=s&&s(t),a&&(a.c(),a.m(e,null))),16&r[0]&&D(e,"occupied",t[38]&&!t[38].locked),16&r[0]&&D(e,"empty",!t[38]),16&r[0]&&D(e,"slot",t[4].hasSlot(t[40],t[37]))},d(t){t&&k(e),a&&a.d(),o(r)}}}function zr(t){let e,n;return{c(){e=x("img"),S(e,"class","marble svelte-11rckbw"),e.src!==(n=t[7]+"images/marble"+t[4].marble.color+".svg")&&S(e,"src",n),S(e,"alt",""),D(e,"right",!Math.floor((t[4].direction+1)/2))},m(n,r){A(n,e,r),t[27](e)},p(t,r){144&r[0]&&e.src!==(n=t[7]+"images/marble"+t[4].marble.color+".svg")&&S(e,"src",n),16&r[0]&&D(e,"right",!Math.floor((t[4].direction+1)/2))},d(n){n&&k(e),t[27](null)}}}function qr(t){let e,n,r,o,i,s,a,c=t[9](t[40],t[37]),l=c&&Lr(t);return{c(){e=x("div"),n=x("div"),r=x("img"),s=E(),l&&l.c(),S(r,"class","part svelte-11rckbw"),r.src!==(o=t[7]+"images/"+t[38].name+".svg")&&S(r,"src",o),S(r,"alt",i=t[38].name),D(r,"locked",t[38].locked),S(n,"class","wrapper svelte-11rckbw"),D(n,"down",t[10](t[40],t[37])),D(n,"reset",t[2]),S(e,"class",a=f(t[38].name)+" svelte-11rckbw"),D(e,"flipped",t[38].facing),D(e,"right",t[11](t[40],t[37]))},m(t,o){A(t,e,o),C(e,n),C(n,r),C(n,s),l&&l.m(n,null)},p(t,s){144&s[0]&&r.src!==(o=t[7]+"images/"+t[38].name+".svg")&&S(r,"src",o),16&s[0]&&i!==(i=t[38].name)&&S(r,"alt",i),16&s[0]&&D(r,"locked",t[38].locked),16&s[0]&&(c=t[9](t[40],t[37])),c?l?l.p(t,s):(l=Lr(t),l.c(),l.m(n,null)):l&&(l.d(1),l=null),1040&s[0]&&D(n,"down",t[10](t[40],t[37])),4&s[0]&&D(n,"reset",t[2]),16&s[0]&&a!==(a=f(t[38].name)+" svelte-11rckbw")&&S(e,"class",a),16&s[0]&&D(e,"flipped",t[38].facing),2064&s[0]&&D(e,"right",t[11](t[40],t[37]))},d(t){t&&k(e),l&&l.d()}}}function Lr(t){let e,n;return{c(){e=x("img"),S(e,"class","marble svelte-11rckbw"),e.src!==(n=t[7]+"images/marble"+t[4].marble.color+".svg")&&S(e,"src",n),S(e,"alt","")},m(n,r){A(n,e,r),t[26](e)},p(t,r){144&r[0]&&e.src!==(n=t[7]+"images/marble"+t[4].marble.color+".svg")&&S(e,"src",n)},d(n){n&&k(e),t[26](null)}}}function Ur(t,e){let n,r,o;function i(t,e){return(null==r||16&e[0])&&(r=!!t[4].isValid(t[40],t[37])),r?jr:Pr}let s=i(e,[-1]),a=s(e);return{key:t,first:null,c(){n=F(),a.c(),o=F(),this.first=n},m(t,e){A(t,n,e),a.m(t,e),A(t,o,e)},p(t,e){s===(s=i(t,e))&&a?a.p(t,e):(a.d(1),a=s(t),a&&(a.c(),a.m(o.parentNode,o)))},d(t){t&&k(n),a.d(t),t&&k(o)}}}function Gr(t,e){let n,r,o=[],i=new Map,s=e[35];const a=t=>t[40];for(let t=0;t<s.length;t+=1){let n=Dr(e,s,t),r=a(n);i.set(r,o[t]=Ur(r,n))}return{key:t,first:null,c(){n=x("div");for(let t=0;t<o.length;t+=1)o[t].c();r=E(),S(n,"class","row svelte-11rckbw"),this.first=n},m(t,e){A(t,n,e);for(let t=0;t<o.length;t+=1)o[t].m(n,null);C(n,r)},p(t,e){if(3990&e[0]){const s=t[35];o=gt(o,e,a,1,t,s,i,n,mt,Ur,r,Dr)}},d(t){t&&k(n);for(let t=0;t<o.length;t+=1)o[t].d()}}}function Hr(t){let e,n;return{c(){e=x("img"),S(e,"class","modal-image svelte-11rckbw"),e.src!==(n=t[7]+"images/marbleblue.svg")&&S(e,"src",n),S(e,"alt","Blue Marble")},m(t,n){A(t,e,n)},p(t,r){128&r[0]&&e.src!==(n=t[7]+"images/marbleblue.svg")&&S(e,"src",n)},d(t){t&&k(e)}}}function Wr(t){let e,n;return{c(){e=x("img"),S(e,"class","modal-image svelte-11rckbw"),e.src!==(n=t[7]+"images/marblered.svg")&&S(e,"src",n),S(e,"alt","Red Marble")},m(t,n){A(t,e,n)},p(t,r){128&r[0]&&e.src!==(n=t[7]+"images/marblered.svg")&&S(e,"src",n)},d(t){t&&k(e)}}}function Xr(t){let e,n,r,i,s,a,c,l,u,h,p,f,d,m,g,b,y,v,w,$,F,T,R,I,N,M,O,P,j,z,q,L,U,G,W,X,Y,J,V,Z,tt,et,nt,rt,ot,it,st,at=t[5].numbers.left+"",ct=t[5].numbers.right+"",lt=[],ut=new Map;const ft=new Qt({props:{marbles:t[5].left}}),dt=new Qt({props:{direction:"right",marbles:t[5].right}});let Ct=t[4].marble&&t[4].position&&1===t[4].direction&&-1===t[4].position.y&&Mr(t),At=t[4].marble&&t[4].position&&-1===t[4].direction&&-1===t[4].position.y&&Or(t),kt=t[4];const $t=t=>t[37];for(let e=0;e<kt.length;e+=1){let n=Nr(t,kt,e),r=$t(n);ut.set(r,lt[e]=Gr(r,n))}const xt=new Qt({props:{result:!0,direction:"right",marbles:t[5].results}});function Bt(e){t[31].call(null,e)}let Et={title:"Number of Blue Marbles",number:t[5].numbers.left,infinity:!1,max:"20",$$slots:{default:[Hr]},$$scope:{ctx:t}};void 0!==t[5].edit.left&&(Et.visible=t[5].edit.left);const Ft=new ce({props:Et});function Kt(e){t[33].call(null,e)}H.push(()=>bt(Ft,"visible",Bt)),Ft.$on("update",t[32]);let Tt={title:"Number of Red Marbles",number:t[5].numbers.right,infinity:!1,max:"20",$$slots:{default:[Wr]},$$scope:{ctx:t}};void 0!==t[5].edit.right&&(Tt.visible=t[5].edit.right);const St=new ce({props:Tt});return H.push(()=>bt(St,"visible",Kt)),St.$on("update",t[34]),{c(){e=x("div"),n=x("div"),r=x("div"),i=x("div"),s=x("img"),l=B("\n        x "),u=B(at),h=E(),yt(ft.$$.fragment),p=E(),f=x("div"),d=x("div"),m=x("img"),y=B("\n        x "),v=B(ct),w=E(),yt(dt.$$.fragment),$=E(),F=x("div"),T=x("div"),Ct&&Ct.c(),R=E(),I=x("div"),At&&At.c(),N=E(),M=x("div");for(let t=0;t<lt.length;t+=1)lt[t].c();O=E(),P=x("div"),j=x("button"),z=B("Trigger Left"),L=E(),U=x("button"),G=B("Trigger Right"),X=E(),Y=x("div"),yt(xt.$$.fragment),J=E(),V=x("button"),Z=B("Reset"),et=E(),yt(Ft.$$.fragment),rt=E(),yt(St.$$.fragment),s.src!==(a=t[7]+"images/marbleblue.svg")&&S(s,"src",a),S(s,"alt",c=t[5].numbers.left+" Blue Marbles"),S(s,"class","svelte-11rckbw"),S(i,"class","marble-numbers svelte-11rckbw"),S(r,"class","container svelte-11rckbw"),m.src!==(g=t[7]+"images/marblered.svg")&&S(m,"src",g),S(m,"alt",b=t[5].numbers.right+" Red Marbles"),S(m,"class","svelte-11rckbw"),S(d,"class","marble-numbers svelte-11rckbw"),S(f,"class","container svelte-11rckbw"),S(n,"id","top-trays"),S(n,"class","svelte-11rckbw"),D(n,"no-challenge",!t[6]),S(T,"class","marble-start svelte-11rckbw"),S(I,"class","marble-start flipped svelte-11rckbw"),S(F,"id","start-ramps"),S(F,"class","svelte-11rckbw"),S(M,"id","board"),j.disabled=q=t[4].marble||t[3]||t[6]&&"left"!==t[6].trigger,S(j,"class","svelte-11rckbw"),U.disabled=W=t[4].marble||t[3]||t[6]&&"right"!==t[6].trigger,S(U,"class","svelte-11rckbw"),S(P,"id","levers"),S(P,"class","svelte-11rckbw"),V.disabled=tt=!t[4].marble&&!t[5].results.length,S(V,"class","svelte-11rckbw"),S(Y,"id","results-tray"),S(Y,"class","svelte-11rckbw"),S(e,"id","board-container"),S(e,"class","svelte-11rckbw")},m(a,c,g){A(a,e,c),C(e,n),C(n,r),C(r,i),C(i,s),C(i,l),C(i,u),C(r,h),vt(ft,r,null),C(n,p),C(n,f),C(f,d),C(d,m),C(d,y),C(d,v),C(f,w),vt(dt,f,null),C(e,$),C(e,F),C(F,T),Ct&&Ct.m(T,null),C(F,R),C(F,I),At&&At.m(I,null),C(e,N),C(e,M);for(let t=0;t<lt.length;t+=1)lt[t].m(M,null);t[30](M),C(e,O),C(e,P),C(P,j),C(j,z),C(P,L),C(P,U),C(U,G),C(e,X),C(e,Y),vt(xt,Y,null),C(Y,J),C(Y,V),C(V,Z),A(a,et,c),vt(Ft,a,c),A(a,rt,c),vt(St,a,c),it=!0,g&&o(st),st=[K(i,"click",t[22]),K(d,"click",t[23]),K(j,"click",t[12]),K(U,"click",t[13]),K(V,"click",t[14])]},p(t,e){(!it||128&e[0]&&s.src!==(a=t[7]+"images/marbleblue.svg"))&&S(s,"src",a),(!it||32&e[0]&&c!==(c=t[5].numbers.left+" Blue Marbles"))&&S(s,"alt",c),(!it||32&e[0])&&at!==(at=t[5].numbers.left+"")&&_(u,at);const r={};32&e[0]&&(r.marbles=t[5].left),ft.$set(r),(!it||128&e[0]&&m.src!==(g=t[7]+"images/marblered.svg"))&&S(m,"src",g),(!it||32&e[0]&&b!==(b=t[5].numbers.right+" Red Marbles"))&&S(m,"alt",b),(!it||32&e[0])&&ct!==(ct=t[5].numbers.right+"")&&_(v,ct);const o={};if(32&e[0]&&(o.marbles=t[5].right),dt.$set(o),64&e[0]&&D(n,"no-challenge",!t[6]),t[4].marble&&t[4].position&&1===t[4].direction&&-1===t[4].position.y?Ct?Ct.p(t,e):(Ct=Mr(t),Ct.c(),Ct.m(T,null)):Ct&&(Ct.d(1),Ct=null),t[4].marble&&t[4].position&&-1===t[4].direction&&-1===t[4].position.y?At?At.p(t,e):(At=Or(t),At.c(),At.m(I,null)):At&&(At.d(1),At=null),3990&e[0]){const n=t[4];lt=gt(lt,e,$t,1,t,n,ut,M,mt,Gr,null,Nr)}(!it||88&e[0]&&q!==(q=t[4].marble||t[3]||t[6]&&"left"!==t[6].trigger))&&(j.disabled=q),(!it||88&e[0]&&W!==(W=t[4].marble||t[3]||t[6]&&"right"!==t[6].trigger))&&(U.disabled=W);const i={};32&e[0]&&(i.marbles=t[5].results),xt.$set(i),(!it||48&e[0]&&tt!==(tt=!t[4].marble&&!t[5].results.length))&&(V.disabled=tt);const l={};32&e[0]&&(l.number=t[5].numbers.left),128&e[0]|1024&e[1]&&(l.$$scope={dirty:e,ctx:t}),!nt&&32&e[0]&&(nt=!0,l.visible=t[5].edit.left,Q(()=>nt=!1)),Ft.$set(l);const h={};32&e[0]&&(h.number=t[5].numbers.right),128&e[0]|1024&e[1]&&(h.$$scope={dirty:e,ctx:t}),!ot&&32&e[0]&&(ot=!0,h.visible=t[5].edit.right,Q(()=>ot=!1)),St.$set(h)},i(t){it||(ht(ft.$$.fragment,t),ht(dt.$$.fragment,t),ht(xt.$$.fragment,t),ht(Ft.$$.fragment,t),ht(St.$$.fragment,t),it=!0)},o(t){pt(ft.$$.fragment,t),pt(dt.$$.fragment,t),pt(xt.$$.fragment,t),pt(Ft.$$.fragment,t),pt(St.$$.fragment,t),it=!1},d(n){n&&k(e),wt(ft),wt(dt),Ct&&Ct.d(),At&&At.d();for(let t=0;t<lt.length;t+=1)lt[t].d();t[30](null),wt(xt),n&&k(et),wt(Ft,n),n&&k(rt),wt(St,n),o(st)}}}function Yr(t,e,n){let r,o,i,s,a,c;l(t,Ir,t=>n(18,r=t)),l(t,Lt,t=>n(19,o=t)),l(t,qt,t=>n(4,i=t)),l(t,pe,t=>n(5,s=t)),l(t,Gt,t=>n(6,a=t)),l(t,Ht,t=>n(7,c=t));let{lastGrab:u}=e,{boardElement:h}=e;const p=U();function f(t,e,r){("mousedown"===t.type&&0===t.button||"touchstart"===t.type&&1===t.touches.length)&&!o&&!i.marble&&i[r][e]&&(t.preventDefault(),t.stopPropagation(),"touchstart"===t.type&&p("touch",t),i[r][e].locked?i[r][e].flipsOnMarble&&(i.flip(e,r),qt.set(i),console.log("Flipped "+i[r][e].name),Ir.sendBoard()):(console.log("Grabbed "+i[r][e].name),d(Lt,o=i[r][e]),d(qt,i[r][e]=!1,i),n(17,u={x:e,y:r,timeout:setTimeout(()=>n(17,u={x:!1,y:!1,timeout:!1}),300)}),Ir.sendBoard()))}let m,g=!1,b=!1;function y(t="left"){!i.marble&&s[t].length&&(i.startRun(s[t].pop(),t,async()=>(qt.set(i),n(2,g=!0),await(V(),Y),setTimeout(()=>n(2,g=!1),1),new Promise(t=>{m.addEventListener("animationend",t,{once:!0}),m.addEventListener("oTransitionEnd",t,{once:!0}),m.addEventListener("webkitTransitionEnd",t,{once:!0})}))).then(t=>{t&&(s.results.push(t.marble),qt.set(i),y(t.side),pe.set(s))}).catch(()=>{0===s.results.length?(pe.reset(),n(3,b=!1)):(d(qt,i.marble=!1,i),n(3,b=!0))}),pe.set(s))}function v(t,e){return i.marble&&i.position&&t===i.position.x&&e===i.position.y}function w(){pe.reset(),n(3,b=!1),Ir.sendBoard()}function C(t){d(pe,s.edit[t]=!a,s),pe.set(s)}function A(t,e){const n=s.numbers[t];d(pe,s.numbers[t]=e,s),pe.set(s),n!=s.numbers[t]&&w()}return t.$set=t=>{"lastGrab"in t&&n(17,u=t.lastGrab),"boardElement"in t&&n(0,h=t.boardElement)},t.$$.update=()=>{262144&t.$$.dirty[0]&&r&&r.on("run",t=>{y(t),console.log("run")})},[h,m,g,b,i,s,a,c,f,v,function(t,e){return v(t,e)&&"gear"!=i.at(t,e).name||i.position&&!v(t,e)&&i.flipableNeighbors(i.position.x,i.position.y).has(i.at(t,e))},function(t,e){return v(t,e)&&Math.floor((i.direction+1)/2)===i.at(t,e).facing},function(){r&&r.emit("run","left"),y("left")},function(){r&&r.emit("run","right"),y("right")},w,C,A,u,r,o,p,y,()=>C("left"),()=>C("right"),function(t){H[t?"unshift":"push"](()=>{n(1,m=t)})},function(t){H[t?"unshift":"push"](()=>{n(1,m=t)})},function(t){H[t?"unshift":"push"](()=>{n(1,m=t)})},function(t){H[t?"unshift":"push"](()=>{n(1,m=t)})},(t,e,n)=>f(n,t,e),(t,e,n)=>f(n,t,e),function(t){H[t?"unshift":"push"](()=>{n(0,h=t)})},function(t){s.edit.left=t,pe.set(s)},t=>A("left",t.detail),function(t){s.edit.right=t,pe.set(s)},t=>A("right",t.detail)]}Ir.connect=function(t,e){let n=!1;t?n="uuid="+t:e&&(n="board="+e);const r=Sr.connect(window.location.origin,{query:n});this.set(r),r.on("joined",t=>{Rr(t.board),history.pushState(null,document.title,window.location.pathname+"?uuid="+t.uuid)}),r.on("board",Rr),r.on("failed",t=>{this.disconnect(),alert(t)}),r.on("disconnect",t=>{this.disconnect(),"io client disconnect"!==t&&alert(t)})},Ir.disconnect=function(){const t=window.location.pathname.slice(0,-"room/".length);history.pushState(null,document.title,t),this.update(t=>(t&&t.close(),!1))},Ir.sendBoard=function(){const t=c(this);return!!t&&(t.emit("board",_r()),!0)};class Jr extends At{constructor(t){super(),Ct(this,t,Yr,Xr,s,{lastGrab:17,boardElement:0},[-1,-1])}}function Vr(t,e,n){const r=t.slice();return r[14]=e[n],r[15]=e,r[16]=n,r}function Zr(e){let n;return{c(){n=x("span"),n.textContent="∞",S(n,"class","infinity svelte-hegwk3")},m(t,e){A(t,n,e)},p:t,d(t){t&&k(n)}}}function Qr(t){let e,n=t[14].count+"";return{c(){e=B(n)},m(t,n){A(t,e,n)},p(t,r){1&r&&n!==(n=t[14].count+"")&&_(e,n)},d(t){t&&k(e)}}}function to(t){let e,n,r,o;return{c(){e=x("img"),o=E(),S(e,"class","modal-image svelte-hegwk3"),e.src!==(n=t[1]+"images/"+t[14].name+".svg")&&S(e,"src",n),S(e,"alt",r=t[14].name)},m(t,n){A(t,e,n),A(t,o,n)},p(t,o){3&o&&e.src!==(n=t[1]+"images/"+t[14].name+".svg")&&S(e,"src",n),1&o&&r!==(r=t[14].name)&&S(e,"alt",r)},d(t){t&&k(e),t&&k(o)}}}function eo(t){let e,n,r,i,s,a,c,l,u,h,p;function f(t,e){return t[14].count!=1/0?Qr:Zr}let d=f(t),m=d(t);function g(...e){return t[8](t[14],...e)}function b(...e){return t[9](t[14],...e)}function y(...e){return t[10](t[14],...e)}function v(...e){return t[11](t[14],...e)}function w(e){t[12].call(null,e,t[14])}let $={title:"Number of "+t[14].name+"s",number:t[14].count,$$slots:{default:[to]},$$scope:{ctx:t}};void 0!==t[14].editing&&($.visible=t[14].editing);const F=new ce({props:$});return H.push(()=>bt(F,"visible",w)),F.$on("update",(function(...e){return t[13](t[14],...e)})),{c(){e=x("div"),n=x("img"),s=E(),a=x("span"),c=B("x \n      "),m.c(),l=E(),yt(F.$$.fragment),n.src!==(r=t[1]+"images/"+t[14].name+".svg")&&S(n,"src",r),S(n,"alt",i=t[14].name),S(n,"class","svelte-hegwk3"),S(a,"class","count svelte-hegwk3"),S(e,"class","part svelte-hegwk3"),D(e,"unavailable",!t[14].count)},m(t,r,i){A(t,e,r),C(e,n),C(e,s),C(e,a),C(a,c),m.m(a,null),A(t,l,r),vt(F,t,r),h=!0,i&&o(p),p=[K(e,"mousedown",g),K(e,"touchstart",b),K(e,"mouseup",y),K(e,"touchend",v)]},p(o,s){t=o,(!h||3&s&&n.src!==(r=t[1]+"images/"+t[14].name+".svg"))&&S(n,"src",r),(!h||1&s&&i!==(i=t[14].name))&&S(n,"alt",i),d===(d=f(t))&&m?m.p(t,s):(m.d(1),m=d(t),m&&(m.c(),m.m(a,null))),1&s&&D(e,"unavailable",!t[14].count);const c={};1&s&&(c.title="Number of "+t[14].name+"s"),1&s&&(c.number=t[14].count),131075&s&&(c.$$scope={dirty:s,ctx:t}),!u&&1&s&&(u=!0,c.visible=t[14].editing,Q(()=>u=!1)),F.$set(c)},i(t){h||(ht(F.$$.fragment,t),h=!0)},o(t){pt(F.$$.fragment,t),h=!1},d(t){t&&k(e),m.d(),t&&k(l),wt(F,t),o(p)}}}function no(t){let e,n,r=t[0],o=[];for(let e=0;e<r.length;e+=1)o[e]=eo(Vr(t,r,e));const i=t=>pt(o[t],1,1,()=>{o[t]=null});return{c(){e=x("div");for(let t=0;t<o.length;t+=1)o[t].c();S(e,"id","parts-tray"),S(e,"class","svelte-hegwk3")},m(t,r){A(t,e,r);for(let t=0;t<o.length;t+=1)o[t].m(e,null);n=!0},p(t,[n]){if(31&n){let s;for(r=t[0],s=0;s<r.length;s+=1){const i=Vr(t,r,s);o[s]?(o[s].p(i,n),ht(o[s],1)):(o[s]=eo(i),o[s].c(),ht(o[s],1),o[s].m(e,null))}for(lt(),s=r.length;s<o.length;s+=1)i(s);ut()}},i(t){if(!n){for(let t=0;t<r.length;t+=1)ht(o[t]);n=!0}},o(t){o=o.filter(Boolean);for(let t=0;t<o.length;t+=1)pt(o[t]);n=!1},d(t){t&&k(e),$(o,t)}}}function ro(t,e,n){let r,o,i,s;l(t,Lt,t=>n(5,r=t)),l(t,jt,t=>n(0,o=t)),l(t,Gt,t=>n(6,i=t)),l(t,Ht,t=>n(1,s=t));const a=U();function c(t,e){("mousedown"===t.type&&0===t.button||"touchstart"===t.type&&1===t.touches.length)&&!r&&(t.preventDefault(),t.stopPropagation(),"touchstart"===t.type&&a("touch",t),e.count>0&&(console.log("Grabbed "+e.name),e.count-=1,d(Lt,r=new e)),e.editTimer=setTimeout(()=>e.editTimer=!1,600),jt.set(o))}function u(t,e){if(e.editTimer&&("mouseup"===t.type&&0===t.button||"touchend"===t.type&&1===t.changedTouches.length&&0===t.touches.length)){if("touchend"===t.type){const n=t.target.getBoundingClientRect(),r=t.changedTouches[0].pageX,o=t.changedTouches[0].pageY;r>n.left+window.scrollX&&r<n.right+window.scrollX&&o>n.top+window.scrollY&&o<n.bottom+window.scrollY&&(e.editing=!i)}else e.editing=!i;clearTimeout(e.editTimer),e.editTimer=!1,jt.set(o)}}function h(t,e){t.count=e,jt.set(o)}return[o,s,c,u,h,r,i,a,(t,e)=>c(e,t),(t,e)=>c(e,t),(t,e)=>u(e,t),(t,e)=>u(e,t),function(t,e){e.editing=t,jt.set(o)},(t,e)=>h(t,e.detail)]}class oo extends At{constructor(t){super(),Ct(this,t,ro,no,s,{})}}function io(t){let e,n,r,o;return{c(){e=x("div"),n=x("img"),n.src!==(r=t[2]+"images/"+t[1].name+".svg")&&S(n,"src",r),S(n,"alt",o=t[1].name),S(n,"class","svelte-mtsmwy"),D(n,"flipped",t[1].facing),S(e,"id","hand"),I(e,"top",t[0].top+"px"),I(e,"left",t[0].left+"px"),S(e,"class","svelte-mtsmwy")},m(t,r){A(t,e,r),C(e,n)},p(t,i){6&i&&n.src!==(r=t[2]+"images/"+t[1].name+".svg")&&S(n,"src",r),2&i&&o!==(o=t[1].name)&&S(n,"alt",o),2&i&&D(n,"flipped",t[1].facing),1&i&&I(e,"top",t[0].top+"px"),1&i&&I(e,"left",t[0].left+"px")},d(t){t&&k(e)}}}function so(e){let n,r=e[1]&&io(e);return{c(){r&&r.c(),n=F()},m(t,e){r&&r.m(t,e),A(t,n,e)},p(t,[e]){t[1]?r?r.p(t,e):(r=io(t),r.c(),r.m(n.parentNode,n)):r&&(r.d(1),r=null)},i:t,o:t,d(t){r&&r.d(t),t&&k(n)}}}function ao(t,e,n){let r,o;l(t,Lt,t=>n(1,r=t)),l(t,Ht,t=>n(2,o=t));let{mousePosition:i}=e;return t.$set=t=>{"mousePosition"in t&&n(0,i=t.mousePosition)},[i,r,o]}class co extends At{constructor(t){super(),Ct(this,t,ao,so,s,{mousePosition:0})}}function lo(t){let e,n,r,i,s,a,c;function l(e){t[10].call(null,e)}function u(e){t[11].call(null,e)}let h={};void 0!==t[2]&&(h.boardElement=t[2]),void 0!==t[1]&&(h.lastGrab=t[1]);const p=new Jr({props:h});H.push(()=>bt(p,"boardElement",l)),H.push(()=>bt(p,"lastGrab",u)),p.$on("touch",t[12]);const f=new oo({});f.$on("touch",t[13]);const d=new co({props:{mousePosition:t[0]}});return{c(){e=x("div"),yt(p.$$.fragment),i=E(),yt(f.$$.fragment),s=E(),yt(d.$$.fragment),S(e,"id","play-area"),S(e,"class","svelte-y9d9qr"),D(e,"grabbed",t[3])},m(n,r,l){A(n,e,r),vt(p,e,null),C(e,i),vt(f,e,null),A(n,s,r),vt(d,n,r),a=!0,l&&o(c),c=[K(e,"mousemove",t[4]),K(e,"mouseup",t[6]),K(e,"mouseleave",t[14]),K(e,"touchmove",t[5]),K(e,"touchend",t[6])]},p(t,[o]){const i={};!n&&4&o&&(n=!0,i.boardElement=t[2],Q(()=>n=!1)),!r&&2&o&&(r=!0,i.lastGrab=t[1],Q(()=>r=!1)),p.$set(i),8&o&&D(e,"grabbed",t[3]);const s={};1&o&&(s.mousePosition=t[0]),d.$set(s)},i(t){a||(ht(p.$$.fragment,t),ht(f.$$.fragment,t),ht(d.$$.fragment,t),a=!0)},o(t){pt(p.$$.fragment,t),pt(f.$$.fragment,t),pt(d.$$.fragment,t),a=!1},d(t){t&&k(e),wt(p),wt(f),t&&k(s),wt(d,t),o(c)}}}function uo(t,e,n){let r,o,i;l(t,qt,t=>n(7,r=t)),l(t,Lt,t=>n(3,o=t)),l(t,jt,t=>n(8,i=t));let s,a={},c={x:!1,y:!1,timeout:!1};function u(t,e){let n=s.getBoundingClientRect(),o=Math.floor((t-(n.left+window.scrollX))/(n.width/r[0].length)),i=Math.floor((e-(n.top+window.scrollY))/(n.height/r.length));return!!(t>n.left+window.scrollX&&t<n.right+window.scrollX&&e>n.top+window.scrollY&&e<n.bottom+window.scrollY&&r.isValid(o,i))&&[o,i]}function h(t){n(0,a.left=t.pageX,a),n(0,a.top=t.pageY,a)}function p(t){1===t.touches.length&&(h(t.touches[0]),t.preventDefault(),t.stopPropagation())}function f(t,e=!1){if(o&&("mouseup"===t.type&&0===t.button||"touchend"===t.type&&1===t.changedTouches.length&&0===t.touches.length||e)){let e;if(e="touchend"===t.type?u(t.changedTouches[0].pageX,t.changedTouches[0].pageY):u(t.pageX,t.pageY),r.marble||!e||o.requiresSlot&&!r.hasSlot(...e)||r[e[1]][e[0]])i.find(t=>t.name===o.name).count++,jt.set(i),console.log("Dropped "+o.name);else{d(qt,r[e[1]][e[0]]=o,r),c.x===e[0]&&c.y===e[1]&&(r.flip(...e),console.log("Flipped "+o.name)),console.log("Placed "+o.name);let t=Array.from(r.flipableNeighbors(...e));t.length>1&&t.forEach(e=>e.facing=t[1].facing)}c.timeout&&window.clearTimeout(c.timeout),d(Lt,o=!1),qt.set(r),Ir.sendBoard(),t.preventDefault(),t.stopPropagation()}}return[a,c,s,o,h,p,f,r,i,u,function(t){s=t,n(2,s)},function(t){c=t,n(1,c)},t=>p(t.detail),t=>p(t.detail),t=>f(t,!0)]}class ho extends At{constructor(t){super(),Ct(this,t,uo,lo,s,{})}}function po(e){let n,r,o,i,s;return{c(){n=x("div"),r=x("button"),r.textContent="Copy Board Link To Clipboard",o=E(),i=x("textarea"),S(r,"class","svelte-12wt4mi"),S(i,"name","url"),S(i,"id","copy-text"),S(i,"cols","30"),S(i,"rows","10"),S(i,"class","svelte-12wt4mi"),S(n,"id","copy-url")},m(t,a,c){A(t,n,a),C(n,r),C(n,o),C(n,i),e[3](i),c&&s(),s=K(r,"click",e[1])},p:t,i:t,o:t,d(t){t&&k(n),e[3](null),s()}}}function fo(t,e,n){let r,o;return l(t,Gt,t=>n(2,r=t)),[o,function(){let t=_r(),e=window.location.pathname;e.endsWith("room/")&&(e=e.slice(0,-"room/".length)),e.endsWith("about/")&&(e=e.slice(0,-"about/".length)),e.endsWith("room")&&(e=e.slice(0,-"room".length)),e.endsWith("about")&&(e=e.slice(0,-"about".length));let i=r?"&id="+r.id:"",s=`${window.location.origin}${e}?code=${t}${i}`;n(0,o.value=s,o),n(0,o.style.display="inline-block",o),o.select(),o.setSelectionRange(0,99999),document.execCommand("copy"),n(0,o.style.display="",o)},r,function(t){H[t?"unshift":"push"](()=>{n(0,o=t)})}]}class mo extends At{constructor(t){super(),Ct(this,t,fo,po,s,{})}}var go=[{id:1,name:"Gravity",code:"-C1GD0FC1GKC1GKC1GKC1GKK_IA0E2A4A6A7A8A",trigger:"left",output:"bbbbbbbb",objective:"Make all of the blue balls (and only the blue balls) reach the end."},{id:2,name:"Re-entry",code:"-C1GD1FE1EF1DG1CH1BKKKKK_II0F2A6A7A4A8A",trigger:"left",output:"bbbbbbbb",objective:"Make all of the blue balls (and only the blue balls) reach the end."},{id:3,name:"Ignition",code:"-C1C0CKKKKKI0AH1BI0AH1BK_II0G2A6A7A4A8A",trigger:"left",output:"rrrrrrrrb",objective:"Release one blue ball and then all of the red balls."},{id:4,name:"Fusion",code:"-C0C1CB0E1BA0G1AKKKKKKKK_II0N2A6A7A4A8A",trigger:"right",output:"bbbbbbbbr",objective:"Release one red ball and then all of the blue balls."},{id:5,name:"Entropy",code:"-C1GD1FE6EF1DG0CF1DG0CF1DG0CF1DK_II0J2A6A7A4A8A",trigger:"left",output:"rbrbrbrbrbrbrbrb",objective:"Make the pattern blue, red, blue, red, blue, red..."},{id:6,name:"Total Internal Reflection",code:"-KD1A0DKD1A0DKD1A0DKD1A0DKD1A0DK_II0C2A6F7A4A8A",trigger:"left",output:"rbrbrbrbrbrbrbrb",objective:"Make the pattern blue, red, blue, red, blue, red..."},{id:7,name:"Path of Least Resistance",code:"-KKC6A6EKA6ID6FKB6HC6GKK_II0G2A6A7A4A8A",trigger:"left",output:"bbbbbbbb",objective:"Create a path for the blue balls to reach the output with only 6 ramps."},{id:8,name:"Depolarization",code:"-C1C0CD1A0DE2EKKKKKKKK_II0O2A6A7A4A8A",trigger:"left",output:"rbrbrbrbrbrbrbrb",objective:"Make the pattern blue, red, blue, red, blue, red..."},{id:9,name:"Dimers",code:"-C2C0CD1A0DE6EKKKKKKKK_KK0S2A6A7A4A8A",trigger:"left",output:"rbbrbbrbbrbbrbb",objective:"Make the pattern blue, blue, red, blue, blue, red..."},{id:10,name:"Double Bond",code:"-C2C3CKE6EKKKKKKKK_II0W2A6A7A4A8A",trigger:"left",output:"rrbbrrbbrrbbrrbbrrbbrrbbrrbbrrbb",objective:"Make the pattern blue, blue, red, red, blue, blue, red, red..."},{id:11,name:"Selectivity",code:"-KKE2EKKKA3A3A3A3A3AKKKK_CA0P2A6A7A4A8A",trigger:"left",objective:"Flip bits 2 and 5 to the right. See the puzzle book for further details."},{id:12,name:"Duality",code:"-C1GD1FE2EKKKG0CF0DE7EKK_II0D2A6A7A4A8A",trigger:"left",objective:"Intercept a blue ball."},{id:13,name:"Duality - Part 2",code:"-C1GD1FE2EF1DG1CH0BG0CF0DE7EKK_I0M2A6A7A4A8A",trigger:"left",objective:"Intercept a red ball."},{id:14,name:"Duality - Part 3",code:"-KKE2EKKKKKE7EKK_II0U2A6A7A4A8A",trigger:"left",objective:"If the machine starts with bit A pointing to the left, intercept a blue ball. Otherwise, intercept a red ball. See the puzzle book for further details."},{id:15,name:"Inversion",code:"-C2C0CD1A0DE7EKKKKKE2EKK_II0L2A6C7A4A8A",trigger:"left",objective:" If bit A starts to the left, intercept a blue ball. If bit A starts to the right, intercept a red ball. See the puzzle book for further details."},{id:16,name:"Termination",code:"-C3GB1HC3GB7HKKKKKKK_II0K2A6A7A4A8A",trigger:"left",output:"bbb",objective:"Let only 3 blue balls reach the bottom and catch the 4th ball in the interceptor."},{id:17,name:"Fixed Ratio",code:"-C3C3CD0A1DC2C3CF7DKKKKKKK_II2A6A7A4A8A",trigger:"left",output:"rrrbbb",objective:"Make the pattern blue, blue, blue, red, red, red."},{id:18,name:"Entanglement",code:"-KKE2EKE2EKC7C7CKKKK_II0H2A6A7A4A8A",trigger:"left",objective:" If the top bit AND the bottom bit start pointed to the right, put a ball in interceptor T. Otherwise put a ball in interceptor F. See the puzzle book for further details."},{id:19,name:"Entanglement",code:"-KKE2EKE2EKKKKKE7E_II2A6C7A4A8A",trigger:"left",objective:"If the top bit AND the bottom bit start pointed to the right, intercept a blue ball. Otherwise, intercept a red ball."},{id:20,name:"Symbiosis",code:"-KKE2EKE2EKKKKKE7E_II2A6C7A4A8A",trigger:"left",objective:"If the top bit OR the bottom bit start pointed to the right, intercept a blue ball. Otherwise, intercept a red ball."},{id:21,name:"Quantum Number",code:"-C3GB1A1FC3GB1A1FC3GB1A1FC3GB1A1FC1GD1FK_II0F2A6A7A4A8A",trigger:"left",objective:" Use register A to count the number of blue balls. (Use 15 or fewer balls.) See the puzzle book for further details. See the puzzle book for further details."},{id:22,name:"Depletion",code:"-C2GB0A0FC2GB0A0FC2GB0A0FC2GB0A0FC0GB0HK_II0E2A6A7A4A8A",trigger:"left",objective:"Register A starts at 15. Subtract the number of blue balls from the register. (Use 15 or fewer balls.) See the puzzle book for further details."},{id:23,name:"Tetrad",code:"-C2GB0A0FA1A2GB0A0FA1A2GB0A7FA1IB0HA1IB0HK_II0A2A6A7A4A8A",trigger:"left",output:"bbbb",objective:"Let exactly 4 blue balls reach the end. (Intercept the 5th.)"},{id:24,name:"Ennead",code:"-C2GKC2GKC2GKC2GKKKK_MM0O2A6A7B4A8A",trigger:"left",output:"bbbbbbbbb",objective:"Let exactly 9 blue balls reach the end. (Intercept the 10th.)"},{id:25,name:"Regular Expression",code:"-KKKKKKKKKKK_II2F6A7B4A8A",trigger:"left",output:"rrrbbbbbbb",objective:"Generate the required pattern."},{id:26,name:"Nucleus",code:"-G2CH7BKKKKKKKKK_KK2C6C7A4A8A",trigger:"left",output:"bbbbrbbbb",objective:"Generate the required pattern."},{id:27,name:"Reflection",code:"-G2CB2HE2EB2HE2EB2HE2EB2HE2EKK_II2B6A7B4A8A",objective:"Reverse the direction of each of the 9 starting bits, regardless of the direction they point to start."},{id:28,name:"Latch",code:"-C1C0CD1A0DE4EKC1C0CD0A1DC1C0CD0A1DC1C0CD0A1DK_II0B2A6A7A4B8B",trigger:"left",output:"bbbbbbbb",objective:"Release only the blue balls."},{id:29,name:"One Shot Switch",code:"-C4GKKKKKKKKKK_II2A6B7A4B8B",trigger:"left",output:"bbbbbbbrb",objective:"Release a blue ball, a red ball, and then the rest of the blue balls."},{id:30,name:"Overflow",code:"-C3GKC3GKC3GB5HKKKKK_UA0O2A6A7A4B8B",trigger:"left",objective:"Count the blue balls in register A. If there are more than 7, gear bit OV must flip right (and stay right) to indicate the overflow. See the puzzle book for further details."}];function bo(t,e,n){const r=t.slice();return r[17]=e[n],r[19]=n,r}function yo(t){let e,n,r,i,s,a,c,l,u,h,p,f,d,m,g,b,y,v,w,$=t[3]&&vo(t),F=t[1]&&Ao(t);const _=new mo({});return{c(){e=x("div"),r=E(),i=x("div"),s=x("button"),s.textContent="Clear Board",a=E(),$&&$.c(),c=E(),l=x("button"),u=B("Challenges "),h=x("span"),h.textContent=">",p=E(),F&&F.c(),f=E(),yt(_.$$.fragment),d=E(),m=x("a"),g=B("About"),S(e,"id","cover"),S(e,"class","svelte-1sxu4p1"),S(s,"class","svelte-1sxu4p1"),S(h,"class","arrow svelte-1sxu4p1"),D(h,"up",t[1]),S(l,"class","svelte-1sxu4p1"),S(m,"class","btn svelte-1sxu4p1"),S(m,"href",b=t[4]+"about.html"),S(i,"id","menu"),S(i,"class","svelte-1sxu4p1")},m(n,b,y){A(n,e,b),A(n,r,b),A(n,i,b),C(i,s),C(i,a),$&&$.m(i,null),C(i,c),C(i,l),C(l,u),C(l,h),C(i,p),F&&F.m(i,null),C(i,f),vt(_,i,null),C(i,d),C(i,m),C(m,g),v=!0,y&&o(w),w=[K(e,"click",t[8]),K(s,"click",T(t[14])),K(l,"click",t[15]),K(m,"click",T(t[9]))]},p(t,e){t[3]?$?$.p(t,e):($=vo(t),$.c(),$.m(i,c)):$&&($.d(1),$=null),2&e&&D(h,"up",t[1]),t[1]?F?(F.p(t,e),ht(F,1)):(F=Ao(t),F.c(),ht(F,1),F.m(i,f)):F&&(lt(),pt(F,1,1,()=>{F=null}),ut()),(!v||16&e&&b!==(b=t[4]+"about.html"))&&S(m,"href",b)},i(t){v||(Z(()=>{n||(n=dt(e,$t,{},!0)),n.run(1)}),ht(F),ht(_.$$.fragment,t),Z(()=>{y||(y=dt(i,xt,{x:-300,duration:600},!0)),y.run(1)}),v=!0)},o(t){n||(n=dt(e,$t,{},!1)),n.run(0),pt(F),pt(_.$$.fragment,t),y||(y=dt(i,xt,{x:-300,duration:600},!1)),y.run(0),v=!1},d(t){t&&k(e),t&&n&&n.end(),t&&k(r),t&&k(i),$&&$.d(),F&&F.d(),wt(_),t&&y&&y.end(),o(w)}}}function vo(t){let e;function n(t,e){return t[2]?wo:Co}let r=n(t),o=r(t);return{c(){o.c(),e=F()},m(t,n){o.m(t,n),A(t,e,n)},p(t,i){r===(r=n(t))&&o?o.p(t,i):(o.d(1),o=r(t),o&&(o.c(),o.m(e.parentNode,e)))},d(t){o.d(t),t&&k(e)}}}function wo(t){let e,n,r;return{c(){e=x("a"),n=B("Leave Shared Room"),S(e,"class","btn svelte-1sxu4p1"),S(e,"href",t[4])},m(o,i,s){A(o,e,i),C(e,n),s&&r(),r=K(e,"click",T(t[6]))},p(t,n){16&n&&S(e,"href",t[4])},d(t){t&&k(e),r()}}}function Co(t){let e,n,r,o;return{c(){e=x("a"),n=B("Start Shared Room"),S(e,"class","btn svelte-1sxu4p1"),S(e,"href",r=t[4]+"room/")},m(r,i,s){A(r,e,i),C(e,n),s&&o(),o=K(e,"click",T(t[5]))},p(t,n){16&n&&r!==(r=t[4]+"room/")&&S(e,"href",r)},d(t){t&&k(e),o()}}}function Ao(t){let e,n,r,o=[],i=new Map,s=go;const a=t=>t[19];for(let e=0;e<s.length;e+=1){let n=bo(t,s,e),r=a(n);i.set(r,o[e]=ko(r,n))}return{c(){e=x("ol");for(let t=0;t<o.length;t+=1)o[t].c();S(e,"id","challenges"),S(e,"class","svelte-1sxu4p1")},m(t,n){A(t,e,n);for(let t=0;t<o.length;t+=1)o[t].m(e,null);r=!0},p(t,n){if(144&n){o=gt(o,n,a,1,t,go,i,e,mt,ko,null,bo)}},i(t){r||(Z(()=>{n||(n=dt(e,Bt,{},!0)),n.run(1)}),r=!0)},o(t){n||(n=dt(e,Bt,{},!1)),n.run(0),r=!1},d(t){t&&k(e);for(let t=0;t<o.length;t+=1)o[t].d();t&&n&&n.end()}}}function ko(t,e){let n,r,o,i,s,a,c=e[17].name+"";function l(...t){return e[16](e[17],e[19],...t)}return{key:t,first:null,c(){n=x("li"),r=x("a"),o=B(c),i=E(),S(r,"href",s=e[4]+"?code="+e[17].code),S(n,"class","svelte-1sxu4p1"),this.first=n},m(t,e,s){A(t,n,e),C(n,r),C(r,o),C(r,i),s&&a(),a=K(r,"click",T(l))},p(t,n){e=t,16&n&&s!==(s=e[4]+"?code="+e[17].code)&&S(r,"href",s)},d(t){t&&k(n),a()}}}function $o(t){let e,n,r,o,i,s,a,c,l,u=t[0]&&yo(t);return{c(){e=x("button"),n=x("span"),n.textContent="Menu",r=E(),o=x("img"),s=E(),u&&u.c(),a=F(),S(n,"class","svelte-1sxu4p1"),o.src!==(i=t[4]+"images/menu.svg")&&S(o,"src",i),S(o,"alt","Menu"),S(o,"class","svelte-1sxu4p1"),S(e,"id","menu-button"),S(e,"class","svelte-1sxu4p1")},m(i,h,p){A(i,e,h),C(e,n),C(e,r),C(e,o),A(i,s,h),u&&u.m(i,h),A(i,a,h),c=!0,p&&l(),l=K(e,"click",t[13])},p(t,[e]){(!c||16&e&&o.src!==(i=t[4]+"images/menu.svg"))&&S(o,"src",i),t[0]?u?(u.p(t,e),ht(u,1)):(u=yo(t),u.c(),ht(u,1),u.m(a.parentNode,a)):u&&(lt(),pt(u,1,1,()=>{u=null}),ut())},i(t){c||(ht(u),c=!0)},o(t){pt(u),c=!1},d(t){t&&k(e),t&&k(s),u&&u.d(t),t&&k(a),l()}}}function xo(t,e,n){let r,o,i,s;l(t,Ir,t=>n(2,r=t)),l(t,Gt,t=>n(10,o=t)),l(t,Ut,t=>n(3,i=t)),l(t,Ht,t=>n(4,s=t));const a=U(),c=new URLSearchParams(window.location.search);var u;function h(t,e){let n=!1;if(t?(n=t.code,d(Gt,o=t),document.title="Tumble Together - "+o.name,r&&r.emit("challenge",e),a("instructionModal")):(d(Gt,o=!1),document.title="Tumble Together",r&&r.emit("challenge",!1)),Rr(n),!Ir.sendBoard()){let t=s;n&&(t+="?code="+n+"&id="+(e+1)),history.pushState(null,document.title,t),Ht.update()}m()}window.location.pathname.endsWith("room/")||window.location.pathname.endsWith("room")?(window.location.pathname.endsWith("room")&&(history.pushState(null,document.title,window.location.pathname+"/"),Ht.update()),Rr(),Ir.connect(c.get("uuid")),d(Ut,i=!0)):(Rr(c.get("code")),u=()=>{let t=!!c.has("id")&&c.get("id")-1;t&&t<go.length&&(d(Gt,o=go[t]),document.title="Tumble Together - "+o.name,a("instructionModal"),console.log("dipatched")),fetch(s+"room/",{method:"HEAD"}).then(t=>{d(Ut,i=t.ok)})},L().$$.on_mount.push(u));let p=!1,f=!1;function m(){n(0,p=!1)}return t.$$.update=()=>{1028&t.$$.dirty&&r&&r.on("challenge",t=>{t&&t<go.length?(d(Gt,o=go[t]),document.title="Tumble Together - "+o.name,a("instructionModal")):(d(Gt,o=!1),document.title="Tumble Together")})},[p,f,r,i,s,function(){r||Ir.connect(!1,_r()),window.location.pathname.endsWith("room/")||history.pushState(null,document.title,s+"room/"),m(),Ht.update()},function(){r&&Ir.disconnect(),history.pushState(null,document.title,s),m(),Ht.update()},h,m,function(){a("aboutModal"),m()},o,a,c,()=>n(0,p=!p),()=>h(),()=>n(1,f=!f),(t,e)=>h(t,e)]}class Bo extends At{constructor(t){super(),Ct(this,t,xo,$o,s,{})}}function Eo(t){let e;return{c(){e=x("article"),e.innerHTML='<p class="svelte-3mg6xs">Tumble Together is a web-based emulator for the <a href="https://www.turingtumble.com/" target="_blank">Turing Tumble</a> marble-powered mechanical computer to help build, test and share designs. Tumble Together allows users to quickly share challenges and solutions, and is a useful companion for using the Turing Tumble to teach kids about computer science.</p> \n      <p class="svelte-3mg6xs">The full source code, including instructions on how to run it can be found <a href="https://github.com/ASquirrelsTail/tumble-together" target="_blank">here on GitHub</a>. The client side app built with <a href="https://svelte.dev/" target="_blank">Svelte.js</a> can be run independently to create and share designs. An optional server side implementation allows a group of users to collaborate in real time on a shared Turing Tumble board remotely, using <a href="https://expressjs.com/" target="_blank">Express.js</a> and <a href="https://socket.io/" target="_blank">Socket.IO</a> on a Node.js server.</p> \n      <p class="svelte-3mg6xs">Tumble Together was built by Richard Twilton, in order to help his nephew learn with his Turing Tumble remotely during the Covid-19 Pandemic.</p>'},m(t,n){A(t,e,n)},d(t){t&&k(e)}}}function Fo(t){let e,n;function r(e){t[7].call(null,e)}let o={title:"About Tumble Together",$$slots:{default:[Eo]},$$scope:{ctx:t}};void 0!==t[0]&&(o.visible=t[0]);const i=new re({props:o});return H.push(()=>bt(i,"visible",r)),i.$on("close",t[1]),{c(){yt(i.$$.fragment)},m(t,e){vt(i,t,e),n=!0},p(t,[n]){const r={};256&n&&(r.$$scope={dirty:n,ctx:t}),!e&&1&n&&(e=!0,r.visible=t[0],Q(()=>e=!1)),i.$set(r)},i(t){n||(ht(i.$$.fragment,t),n=!0)},o(t){pt(i.$$.fragment,t),n=!1},d(t){wt(i,t)}}}const Ko="about";function To(t,e,n){let r;l(t,Ht,t=>n(5,r=t));let{visible:o=!1}=e,i=window.location.pathname,s=window.location.search,a=document.title;function c(){i=window.location.pathname,s=window.location.search,a=document.title,(i.endsWith(Ko)||i.endsWith(Ko+"/"))&&(i=r);let t=r+Ko+"/";document.title="Tumble Together - About",history.pushState(null,document.title,t),Ht.update()}return(window.location.pathname.endsWith(Ko)||window.location.pathname.endsWith(Ko+"/"))&&(o=!0),t.$set=t=>{"visible"in t&&n(0,o=t.visible)},t.$$.update=()=>{1&t.$$.dirty&&o&&c()},[o,function(){document.title=a,history.pushState(null,a,i+s),Ht.update()},i,s,a,r,c,function(t){o=t,n(0,o)}]}class So extends At{constructor(t){super(),Ct(this,t,To,Fo,s,{visible:0})}}function _o(t,e,n){const r=t.slice();return r[9]=e[n],r}function Ro(t){let e,n,r,o,i,s,a,c,l,u,h,p,f,d=t[2].objective+"",m=t[2].output&&Io(t);function g(t,e){return t[2].trigger?Mo:No}let b=g(t),y=b(t);return{c(){e=x("h3"),e.textContent="Objective:",n=E(),r=x("p"),o=B(d),i=E(),m&&m.c(),s=E(),a=x("h3"),a.textContent="Instructions",c=E(),l=x("p"),u=B("Use the available parts to complete the challenge. Greyed-out parts cannot be moved, but greyed-out Bits and Gear Bits can be flipped by clicking/tapping on them. Press the "),y.c(),h=B(" trigger to start the marbles rolling. Press the "),p=x("span"),p.textContent="Reset",f=B(" button to put the marbles back and try again."),S(e,"class","svelte-hzv79y"),S(r,"class","svelte-hzv79y"),S(a,"class","svelte-hzv79y"),S(p,"class","orbitron svelte-hzv79y"),S(l,"class","svelte-hzv79y")},m(t,d){A(t,e,d),A(t,n,d),A(t,r,d),C(r,o),A(t,i,d),m&&m.m(t,d),A(t,s,d),A(t,a,d),A(t,c,d),A(t,l,d),C(l,u),y.m(l,null),C(l,h),C(l,p),C(l,f)},p(t,e){4&e&&d!==(d=t[2].objective+"")&&_(o,d),t[2].output?m?m.p(t,e):(m=Io(t),m.c(),m.m(s.parentNode,s)):m&&(m.d(1),m=null),b===(b=g(t))&&y?y.p(t,e):(y.d(1),y=b(t),y&&(y.c(),y.m(l,h)))},d(t){t&&k(e),t&&k(n),t&&k(r),t&&k(i),m&&m.d(t),t&&k(s),t&&k(a),t&&k(c),t&&k(l),y.d()}}}function Io(t){let e,n,r,o=t[2].output,i=[];for(let e=0;e<o.length;e+=1)i[e]=Do(_o(t,o,e));return{c(){e=x("h3"),e.textContent="Required Output:",n=E(),r=x("p");for(let t=0;t<i.length;t+=1)i[t].c();S(e,"class","svelte-hzv79y"),S(r,"class","svelte-hzv79y")},m(t,o){A(t,e,o),A(t,n,o),A(t,r,o);for(let t=0;t<i.length;t+=1)i[t].m(r,null)},p(t,e){if(12&e){let n;for(o=t[2].output,n=0;n<o.length;n+=1){const s=_o(t,o,n);i[n]?i[n].p(s,e):(i[n]=Do(s),i[n].c(),i[n].m(r,null))}for(;n<i.length;n+=1)i[n].d(1);i.length=o.length}},d(t){t&&k(e),t&&k(n),t&&k(r),$(i,t)}}}function Do(t){let e,n;return{c(){e=x("img"),e.src!==(n=t[3]+"images/marble"+("b"===t[9]?"blue":"red")+".svg")&&S(e,"src",n),S(e,"alt","Marble")},m(t,n){A(t,e,n)},p(t,r){12&r&&e.src!==(n=t[3]+"images/marble"+("b"===t[9]?"blue":"red")+".svg")&&S(e,"src",n)},d(t){t&&k(e)}}}function No(e){let n;return{c(){n=B("either")},m(t,e){A(t,n,e)},p:t,d(t){t&&k(n)}}}function Mo(t){let e,n=t[2].trigger+"";return{c(){e=B(n)},m(t,n){A(t,e,n)},p(t,r){4&r&&n!==(n=t[2].trigger+"")&&_(e,n)},d(t){t&&k(e)}}}function Oo(t){let e;return{c(){e=B("You can set the number of available parts in the box by clicking or tapping the corresponding part.")},m(t,n){A(t,e,n)},d(t){t&&k(e)}}}function Po(t){let e;return{c(){e=x("p"),e.innerHTML='To start the marbles rolling press the trigger on the side you would like to start with. To put the marbles back to the start, or end the run early, press the <span class="orbitron svelte-hzv79y">Reset</span> button in the bottom right. You can change the number of marbles by clicking/tapping the marbles at the top of the board.',S(e,"class","svelte-hzv79y")},m(t,n){A(t,e,n)},d(t){t&&k(e)}}}function jo(t){let e,n,r,o,i,s,a;return{c(){e=x("p"),n=B("To work together with friends you can start a shared room from the "),r=x("span"),o=B("Menu "),i=x("img"),a=B(" and send the link to others to work on he same board, tackle challenges together and share changes in real time. Use the menu to leave a shared room as well."),i.src!==(s=t[3]+"images/menu.svg")&&S(i,"src",s),S(i,"alt","Menu"),S(i,"class","svelte-hzv79y"),S(r,"class","orbitron svelte-hzv79y"),S(e,"class","svelte-hzv79y")},m(t,s){A(t,e,s),C(e,n),C(e,r),C(r,o),C(r,i),C(e,a)},p(t,e){8&e&&i.src!==(s=t[3]+"images/menu.svg")&&S(i,"src",s)},d(t){t&&k(e)}}}function zo(t){let e,n,r,o,i,s,a,c,l,u,h,p,f,d,m,g,b,y,v,w,$,F,_,R,I,D=t[2]&&Ro(t),N=!t[2]&&Oo(),M=!t[2]&&Po(),O=t[4]&&jo(t);return{c(){e=x("article"),D&&D.c(),n=E(),r=x("p"),o=B("New parts can be dragged from the box and placed on the board. Most parts require a slot (or smile) to fit on the board, only the Red Gears can be placed on pegs without a slot. To flip a part simply tap/click on it once. To remove a part from drag it off the board.\n    "),N&&N.c(),i=E(),M&&M.c(),s=E(),a=x("p"),c=B("A collection of ready made challenges can be found in the "),l=x("span"),u=B("Menu "),h=x("img"),f=B(" in the top right, as well as buttons to clear the board and copy the current board to a URL you can share with others."),d=E(),O&&O.c(),m=E(),g=x("p"),g.innerHTML='You can return to these instructions at any time by clicking the <span class="orbitron svelte-hzv79y">Instructions ?</span> button in the top right',b=E(),y=x("p"),v=B("More information about Tumble Together and the "),w=x("a"),w.textContent="Turing Tumble",$=B(" can be found on "),F=x("a"),_=B("the about page."),S(r,"class","svelte-hzv79y"),h.src!==(p=t[3]+"images/menu.svg")&&S(h,"src",p),S(h,"alt","Menu"),S(h,"class","svelte-hzv79y"),S(l,"class","orbitron svelte-hzv79y"),S(a,"class","svelte-hzv79y"),S(g,"class","svelte-hzv79y"),S(w,"href","https://www.turingtumble.com/"),S(w,"target","_blank"),S(F,"href",R=t[3]+"about/"),S(y,"class","svelte-hzv79y")},m(p,k,x){A(p,e,k),D&&D.m(e,null),C(e,n),C(e,r),C(r,o),N&&N.m(r,null),C(e,i),M&&M.m(e,null),C(e,s),C(e,a),C(a,c),C(a,l),C(l,u),C(l,h),C(a,f),C(e,d),O&&O.m(e,null),C(e,m),C(e,g),C(e,b),C(e,y),C(y,v),C(y,w),C(y,$),C(y,F),C(F,_),x&&I(),I=K(F,"click",T(t[5]))},p(t,o){t[2]?D?D.p(t,o):(D=Ro(t),D.c(),D.m(e,n)):D&&(D.d(1),D=null),t[2]?N&&(N.d(1),N=null):N||(N=Oo(),N.c(),N.m(r,null)),t[2]?M&&(M.d(1),M=null):M||(M=Po(),M.c(),M.m(e,s)),8&o&&h.src!==(p=t[3]+"images/menu.svg")&&S(h,"src",p),t[4]?O?O.p(t,o):(O=jo(t),O.c(),O.m(e,m)):O&&(O.d(1),O=null),8&o&&R!==(R=t[3]+"about/")&&S(F,"href",R)},d(t){t&&k(e),D&&D.d(),N&&N.d(),M&&M.d(),O&&O.d(),I()}}}function qo(t){let e,n;function r(e){t[8].call(null,e)}let o={title:t[1],$$slots:{default:[zo]},$$scope:{ctx:t}};void 0!==t[0]&&(o.visible=t[0]);const i=new re({props:o});return H.push(()=>bt(i,"visible",r)),{c(){yt(i.$$.fragment)},m(t,e){vt(i,t,e),n=!0},p(t,[n]){const r={};2&n&&(r.title=t[1]),4124&n&&(r.$$scope={dirty:n,ctx:t}),!e&&1&n&&(e=!0,r.visible=t[0],Q(()=>e=!1)),i.$set(r)},i(t){n||(ht(i.$$.fragment,t),n=!0)},o(t){pt(i.$$.fragment,t),n=!1},d(t){wt(i,t)}}}function Lo(t,e,n){let r,o,i;l(t,Gt,t=>n(2,r=t)),l(t,Ht,t=>n(3,o=t)),l(t,Ut,t=>n(4,i=t));let s,{visible:a=!1}=e,c="Instructions";const u=U();return t.$set=t=>{"visible"in t&&n(0,a=t.visible)},t.$$.update=()=>{4&t.$$.dirty&&n(6,s="Instructions - Challenge #"+r.id+": "+r.name),68&t.$$.dirty&&n(1,c=r?s:"Instructions")},[a,c,r,o,i,function(){n(0,a=!1),u("aboutModal")},s,u,function(t){a=t,n(0,a)}]}class Uo extends At{constructor(t){super(),Ct(this,t,Lo,qo,s,{visible:0})}}function Go(t){let e;return{c(){e=x("span"),e.textContent="- Sharing",S(e,"class","svelte-11f04ni")},m(t,n){A(t,e,n)},d(t){t&&k(e)}}}function Ho(t){let e,n,r,o,i,s,a,c,l,u,h,p,f,d,m=t[2]&&Go();const g=new Bo({});g.$on("aboutModal",t[4]),g.$on("instructionModal",t[5]);const b=new ho({});function y(e){t[6].call(null,e)}let v={};void 0!==t[0]&&(v.visible=t[0]);const w=new So({props:v});function $(e){t[7].call(null,e)}H.push(()=>bt(w,"visible",y));let F={};void 0!==t[1]&&(F.visible=t[1]);const T=new Uo({props:F});return H.push(()=>bt(T,"visible",$)),T.$on("aboutModal",t[8]),{c(){e=x("nav"),n=x("h1"),r=B("Tumble Together! "),m&&m.c(),o=E(),i=x("div"),s=x("button"),s.innerHTML='<span class="title svelte-11f04ni">Instructions </span> \n      <span class="question svelte-11f04ni">?</span>',a=E(),yt(g.$$.fragment),c=E(),yt(b.$$.fragment),l=E(),yt(w.$$.fragment),h=E(),yt(T.$$.fragment),S(n,"class","svelte-11f04ni"),S(s,"id","instructions-button"),S(s,"class","svelte-11f04ni"),S(e,"class","svelte-11f04ni")},m(u,p,y){A(u,e,p),C(e,n),C(n,r),m&&m.m(n,null),C(e,o),C(e,i),C(i,s),C(i,a),vt(g,i,null),A(u,c,p),vt(b,u,p),A(u,l,p),vt(w,u,p),A(u,h,p),vt(T,u,p),f=!0,y&&d(),d=K(s,"click",t[3])},p(t,[e]){t[2]?m||(m=Go(),m.c(),m.m(n,null)):m&&(m.d(1),m=null);const r={};!u&&1&e&&(u=!0,r.visible=t[0],Q(()=>u=!1)),w.$set(r);const o={};!p&&2&e&&(p=!0,o.visible=t[1],Q(()=>p=!1)),T.$set(o)},i(t){f||(ht(g.$$.fragment,t),ht(b.$$.fragment,t),ht(w.$$.fragment,t),ht(T.$$.fragment,t),f=!0)},o(t){pt(g.$$.fragment,t),pt(b.$$.fragment,t),pt(w.$$.fragment,t),pt(T.$$.fragment,t),f=!1},d(t){t&&k(e),m&&m.d(),wt(g),t&&k(c),wt(b,t),t&&k(l),wt(w,t),t&&k(h),wt(T,t),d()}}}function Wo(t,e,n){let r;l(t,Ir,t=>n(2,r=t));let o=!1,i=!1;return[o,i,r,()=>n(1,i=!0),()=>n(0,o=!0),()=>n(1,i=!0),function(t){o=t,n(0,o)},function(t){i=t,n(1,i)},()=>n(0,o=!0)]}return new class extends At{constructor(t){super(),Ct(this,t,Wo,Ho,s,{})}}({target:document.body})}();
//# sourceMappingURL=bundle.js.map
